sepoy_mutiny_immediate_effects = {
	### Bengal Presidency
	# Mughal Uprising
	if = {
		limit = {
			exists = c:MUG
		}
		c:MUG ?= { 
			sepoy_mutiny_remove_puppet_effect = yes
			set_variable = sepoy_mutiny_revolter_var
			add_modifier = {
				name = war_for_independence
				months = normal_modifier_time
			}
		}
		if = {
			limit = {
				exists = s:STATE_DELHI.region_state:BIC
			}
			s:STATE_DELHI.region_state:BIC = { set_state_owner = c:MUG }
		}
		if = {
			limit = {
				NOT = {
					p:xE0EFA0.state.owner = c:MUG
				}
			}
			p:xE0EFA0.state = {
				set_state_owner = c:MUG
			}
		}
	}
	else_if = {
		limit = {
			NOT = { exists = c:MUG }
			exists = s:STATE_DELHI.region_state:BIC
			p:xE0EFA0.state.owner = root
		}
		create_country = {
			origin = root
			tag = MUG
			province = p:xE0EFA0
			on_created = {
				set_variable = sepoy_mutiny_revolter_var
				sepoy_mutiny_apply_laws_effect = yes
				add_modifier = {
					name = war_for_independence
					months = normal_modifier_time
				}
				s:STATE_DELHI.region_state:BIC ?= { set_state_owner = c:MUG }
			}
		}
	}
	else = {
		p:xE0EFA0.state.owner = {
			create_country = {
				origin = root
				tag = MUG
				province = p:xE0EFA0
				on_created = {
					set_variable = sepoy_mutiny_revolter_var
					sepoy_mutiny_apply_laws_effect = yes
					add_modifier = {
						name = war_for_independence
						months = normal_modifier_time
					}
				}
			}
			random_scope_state = {
				limit = {
					state_region = s:STATE_DELHI
				}
				set_state_owner = c:MUG
			}
		}	
	}
	# Bengal uprising
	if = {
		limit = {
			# Low Stability
			je:je_uneasy_raj = { 
				"scripted_bar_progress(sepoy_mutiny_progress_bar_bengal)" <= 50
			}
			# Give East Bengal to Bengal
			NOT = { exists = c:BGL }
			exists = s:STATE_EAST_BENGAL.region_state:BIC
		}
		create_country = {
			origin = root
			tag = BGL
			state = s:STATE_EAST_BENGAL.region_state:BIC
			on_created = {
				sepoy_mutiny_apply_laws_effect = yes
				set_variable = sepoy_mutiny_revolter_var
				add_modifier = {
					name = war_for_independence
					months = normal_modifier_time
				}
			}
		}
	}
	# Sikh uprising
	if = {
		limit = {
			# Low Stability
			je:je_uneasy_raj = { 
				"scripted_bar_progress(sepoy_mutiny_progress_bar_bengal)" <= 50
			}
			# Give Hill Punjab to Sikhs
			NOT = { exists = c:PAN }
			exists = s:STATE_HILL_PUNJAB.region_state:BIC
		}
		set_global_variable = sepoy_mutiny_sikh_uprising_global_var
		create_country = {
			origin = root
			tag = PAN
			state = s:STATE_HILL_PUNJAB.region_state:BIC
			on_created = {
				set_variable = sepoy_mutiny_revolter_var
				sepoy_mutiny_apply_laws_effect = yes
				add_modifier = {
					name = war_for_independence
					months = normal_modifier_time
				}
			}
		}
	}
	### Bombay Presidency
	# Maratha uprising
	if = {
		limit = {
			# Medium Stability
			je:je_uneasy_raj = { 
				"scripted_bar_progress(sepoy_mutiny_progress_bar_bombay)" <= 75
			}
			exists = c:SAT
		}
		c:SAT ?= {
			set_variable = sepoy_mutiny_revolter_var
			sepoy_mutiny_remove_puppet_effect = yes 
			add_modifier = {
				name = war_for_independence
				months = normal_modifier_time
			}
		}
	}
	else_if = {
		limit = {
			# Medium Stability
			je:je_uneasy_raj = { 
				"scripted_bar_progress(sepoy_mutiny_progress_bar_bombay)" <= 75
			}
			# Give Satara proper to Satara
			NOT = { exists = c:SAT }
			exists = s:STATE_BOMBAY.region_state:BIC
			p:x3E5505.state.owner = root
		}
		create_country = {
			origin = root
			tag = SAT
			province = p:x3E5505
			on_created = {
				s:STATE_BOMBAY = {
					set_owner_of_provinces = {
						country = c:SAT
						provinces = { x33E560 xE73C3C x47EE55 x4F5C91 xCC722D xE01853 x187C37 xCF3817 xD6660F }
					}
				}
				set_variable = sepoy_mutiny_revolter_var
				sepoy_mutiny_apply_laws_effect = yes
				add_modifier = {
					name = war_for_independence
					months = normal_modifier_time
				}
			}
		}
	}
	else_if = {
		limit = {
			# Medium Stability
			je:je_uneasy_raj = { 
				"scripted_bar_progress(sepoy_mutiny_progress_bar_bombay)" <= 75
			}			
		}
		p:x3E5505.state.owner = {
			create_country = {
				origin = root
				tag = SAT
				province = p:x3E5505
				on_created = {
					s:STATE_BOMBAY = {
						set_owner_of_provinces = {
							country = c:SAT
							provinces = { x33E560 xE73C3C x47EE55 x4F5C91 xCC722D xE01853 x187C37 xCF3817 xD6660F }
						}
					}
					set_variable = sepoy_mutiny_revolter_var
					sepoy_mutiny_apply_laws_effect = yes
					add_modifier = {
						name = war_for_independence
						months = normal_modifier_time
					}
				}
			}
		}
	}
	if = { # Peshwa Event
		limit = {
			c:SAT ?= {
				has_variable = sepoy_mutiny_revolter_var
			}
			game_date < 1870.1.1
			game_date > 1845.1.1
		}
		c:SAT ?= {
			trigger_event = { id = sepoy_mutiny_events.1 popup = yes days = 7 }  
		}
	}
	# Sindh uprising
	if = {
		limit = {
			# Low Stability
			je:je_uneasy_raj = { 
				"scripted_bar_progress(sepoy_mutiny_progress_bar_bombay)" <= 50
			}
			# Give Sindh to Sindh
			NOT = { exists = c:SIN }
			exists = s:STATE_SINDH.region_state:BIC
		}
		create_country = {
			origin = root
			tag = SIN
			state = s:STATE_SINDH.region_state:BIC
			on_created = {
				set_variable = sepoy_mutiny_revolter_var
				sepoy_mutiny_apply_laws_effect = yes
				add_modifier = {
					name = war_for_independence
					months = normal_modifier_time
				}
			}
		}
	}
	# Gujarat uprising
	if = {
		limit = {
			# Critical Stability
			je:je_uneasy_raj = { 
				"scripted_bar_progress(sepoy_mutiny_progress_bar_bombay)" <= 25
			}
			# Give Gujarat to Gujarat
			NOT = { exists = c:GUJ }
			exists = s:STATE_GUJARAT.region_state:BIC
		}
		create_country = {
			origin = root
			tag = GUJ
			state = s:STATE_GUJARAT.region_state:BIC
			on_created = {
				set_variable = sepoy_mutiny_revolter_var
				sepoy_mutiny_apply_laws_effect = yes
				add_modifier = {
					name = war_for_independence
					months = normal_modifier_time
				}
			}
		}
	}
	### Madras Presidency
	# Kurnool uprising
	if = {
		limit = {
			exists = c:KNO
		}
		c:KNO ?= {
			set_variable = sepoy_mutiny_revolter_var
			sepoy_mutiny_remove_puppet_effect = yes 
			add_modifier = {
				name = war_for_independence
				months = normal_modifier_time
			}
		}
	}
	else_if = {
		limit = {
			# Medium Stability
			je:je_uneasy_raj = { 
				"scripted_bar_progress(sepoy_mutiny_progress_bar_madras)" <= 75
			}
			# Give Kurnool proper to Kurnool
			NOT = { exists = c:KNO }
			exists = s:STATE_KURNOOL.region_state:BIC
			p:x84EE56.state.owner = this
		}
		create_country = {
			origin = root
			tag = KNO
			province = p:x84EE56
			on_created = {
				s:STATE_KURNOOL = {
					set_owner_of_provinces = {
						country = c:KNO
						provinces = { xF91482 }
					}
				}
				set_variable = sepoy_mutiny_revolter_var
				sepoy_mutiny_apply_laws_effect = yes
				add_modifier = {
					name = war_for_independence
					months = normal_modifier_time
				}
			}
		}
	}
	else_if = {
		limit = {
			# Medium Stability
			je:je_uneasy_raj = { 
				"scripted_bar_progress(sepoy_mutiny_progress_bar_madras)" <= 75
			}
		}
		p:x84EE56.state.owner = {
			create_country = {
				origin = root
				tag = KNO
				province = p:x84EE56
				on_created = {
					s:STATE_KURNOOL = {
						set_owner_of_provinces = {
							country = c:KNO
							provinces = { xF91482 }
						}
					}
					set_variable = sepoy_mutiny_revolter_var
					sepoy_mutiny_apply_laws_effect = yes
					add_modifier = {
						name = war_for_independence
						months = normal_modifier_time
					}
				}
			}
		}
	}
	# Carnatic uprising
	if = {
		limit = {
			# Critical Stability
			je:je_uneasy_raj = { 
				"scripted_bar_progress(sepoy_mutiny_progress_bar_bombay)" <= 25
			}
			# Give Madras to Carnatic
			NOT = { exists = c:CAR }
			exists = s:STATE_MADRAS.region_state:BIC
		}
		create_country = {
			origin = root
			tag = CAR
			province = p:x99B424
			on_created = {
				sepoy_mutiny_apply_laws_effect = yes
				s:STATE_MADRAS = {
					set_owner_of_provinces = {
						country = c:CAR
						provinces = { x99B424 x7CCE50 xA3158E xA63901 x5AF5BE xEC1945 x6A381C }
					}
				}
				add_modifier = {
					name = war_for_independence
					months = normal_modifier_time
				}
			}
		}
	}
}

sepoy_mutiny_bengal_effect_low = {
	# Destroy a random non-capital barracks
	if = {
		limit = {
			any_scope_state = {
				OR = {
					region = sr:region_bengal
					region = sr:region_punjab
					region = sr:region_central_india
				}
				NOT = {
					state_region = s:STATE_WEST_BENGAL
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
		}
		random_scope_state = {
			limit = {
				OR = {
					region = sr:region_bengal
					region = sr:region_punjab
					region = sr:region_central_india
				}
				NOT = {
					state_region = s:STATE_WEST_BENGAL
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
			remove_building = building_barracks
			add_modifier = {
				name = sepoy_mutiny_barracks_destruction_modifier
				months = normal_modifier_time
				multiplier = 0.5
			}
			add_radicals_in_state = {
				value = small_radicals
			}
			save_scope_as = bengal_sepoy_barracks_scope
		}
	}
	# Add negative modifiers to every other barracks
	if = {
		limit = {
			any_scope_state = {
				OR = {
					region = sr:region_bengal
					region = sr:region_punjab
					region = sr:region_central_india
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}
			}
		}
		every_scope_state = {
			limit = {
				OR = {
					region = sr:region_bengal
					region = sr:region_punjab
					region = sr:region_central_india
				}	
				any_scope_building = {
					is_building_type = building_barracks
				}
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}				
			}
			add_modifier = {
				name = sepoy_mutiny_barracks_unrest_modifier
				months = normal_modifier_time
				multiplier = 0.5
			}
			add_radicals_in_state = {
				value = small_radicals
			}
		}
	}
	# Mughal uprising
	# Mughal independence war diplomatic play
	if = {
		limit = {
			NOT = {
				any_diplomatic_play = {
					target = { this = c:MUG }
					initiator = { this = c:BIC }
					is_diplomatic_play_type = dp_secession
				}
			}
		}
		create_diplomatic_play = {
			name = sepoy_mutiny
			type = dp_annex_war
			escalation = 80
			target_state = s:STATE_DELHI.region_state:MUG
		}
		# Add Britain
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:MUG ?= this
				}
			}
			if = {
				limit = {
					initiator = {
						is_subject = yes
					}
				}
				add_initiator_backers = { initiator.top_overlord }
			}
		}
		# Add wargoals
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:MUG ?= this
				}
			}
			# Agra State
			if = {
				limit = {
					exists = s:STATE_AGRA.region_state:BIC 
				}
				add_war_goal = {
					holder = c:MUG
					type = conquer_state
					target_state = s:STATE_AGRA.region_state:BIC
				}
			}
			# Oudh State
			if = {
				limit = {
					exists = s:STATE_AWADH.region_state:BIC 
				}
				add_war_goal = {
					holder = c:MUG
					type = conquer_state
					target_state = s:STATE_AWADH.region_state:BIC
				}
			}
			if = {
				limit = {
					NOR = {
						exists = s:STATE_AGRA.region_state:BIC
						exists = s:STATE_AWADH.region_state:BIC
					}
					exists = c:BIC
				}
				add_war_goal = {
					holder = c:MUG
					type = war_reparations
					target_country = c:BIC
				}
			}
		}
	}
}
sepoy_mutiny_bengal_effect_medium = {
	# Destroy a random non-capital barracks
	if = {
		limit = {
			any_scope_state = {
				OR = {
					region = sr:region_bengal
					region = sr:region_punjab
					region = sr:region_central_india
				}
				NOT = {
					state_region = s:STATE_WEST_BENGAL
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
		}
		random_scope_state = {
			limit = {
				OR = {
					region = sr:region_bengal
					region = sr:region_punjab
					region = sr:region_central_india
				}
				NOT = {
					state_region = s:STATE_WEST_BENGAL
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
			remove_building = building_barracks
			add_modifier = {
				name = sepoy_mutiny_barracks_destruction_modifier
				months = normal_modifier_time
			}
			add_radicals_in_state = {
				value = medium_radicals
			}
			save_scope_as = bengal_sepoy_barracks_scope
		}
	}
	# Add negative modifiers to every other barracks
	if = {
		limit = {
			any_scope_state = {
				OR = {
					region = sr:region_bengal
					region = sr:region_punjab
					region = sr:region_central_india
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}
			}
		}
		every_scope_state = {
			limit = {
				OR = {
					region = sr:region_bengal
					region = sr:region_punjab
					region = sr:region_central_india
				}	
				any_scope_building = {
					is_building_type = building_barracks
				}
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}				
			}
			add_modifier = {
				name = sepoy_mutiny_barracks_unrest_modifier
				months = normal_modifier_time
			}
			add_radicals_in_state = {
				value = medium_radicals
			}
		}
	}
	# Mughal uprising
	# Give Agra to Mughals
	if = {
		limit = { exists = s:STATE_AWADH.region_state:BIC }
		s:STATE_AGRA.region_state:BIC = { set_state_owner = c:MUG }
	}
	# Mughal independence war diplomatic play
	if = {
		limit = {
			NOT = {
				any_diplomatic_play = {
					target = { this = c:MUG }
					initiator = { this = c:BIC }
					is_diplomatic_play_type = dp_secession
				}
			}
		}
		create_diplomatic_play = {
			name = sepoy_mutiny
			type = dp_annex_war
			escalation = 80
			target_state = s:STATE_DELHI.region_state:MUG
		}
		# Add Britain
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:MUG ?= this
				}
			}
			if = {
				limit = {
					initiator = {
						is_subject = yes
					}
				}
				add_initiator_backers = { initiator.top_overlord }
			}
		}
		# Add wargoals
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:MUG ?= this
				}
			}
			# Oudh State
			if = {
				limit = {
					exists = s:STATE_AWADH.region_state:BIC 
				}
				add_war_goal = {
					holder = c:MUG
					type = conquer_state
					target_state = s:STATE_AWADH.region_state:BIC
				}
			}
			else = {
				add_war_goal = {
					holder = c:MUG
					type = war_reparations
					target_country = c:BIC
				}
			}
		}
	}
}
sepoy_mutiny_bengal_effect_high = {
	# Destroy a random non-capital barracks
	if = {
		limit = {
			any_scope_state = {
				OR = {
					region = sr:region_bengal
					region = sr:region_punjab
					region = sr:region_central_india
				}
				NOT = {
					state_region = s:STATE_WEST_BENGAL
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
		}
		random_scope_state = {
			limit = {
				OR = {
					region = sr:region_bengal
					region = sr:region_punjab
					region = sr:region_central_india
				}
				NOT = {
					state_region = s:STATE_WEST_BENGAL
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
			remove_building = building_barracks
			add_modifier = {
				name = sepoy_mutiny_barracks_destruction_modifier
				months = normal_modifier_time
				multiplier = 1.5
			}
			add_radicals_in_state = {
				value = large_radicals
			}
			save_scope_as = bengal_sepoy_barracks_scope
		}
	}
	# Add negative modifiers to every other barracks
	if = {
		limit = {
			any_scope_state = {
				OR = {
					region = sr:region_bengal
					region = sr:region_punjab
					region = sr:region_central_india
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}
			}
		}
		every_scope_state = {
			limit = {
				OR = {
					region = sr:region_bengal
					region = sr:region_punjab
					region = sr:region_central_india
				}	
				any_scope_building = {
					is_building_type = building_barracks
				}
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}				
			}
			add_modifier = {
				name = sepoy_mutiny_barracks_unrest_modifier
				months = normal_modifier_time
				multiplier = 1.5
			}
			add_radicals_in_state = {
				value = large_radicals
			}
		}
	}
	# Mughal uprising
	# Give Agra to Mughals
	if = {
		limit = { exists = s:STATE_AGRA.region_state:BIC }
		s:STATE_AGRA.region_state:BIC = { set_state_owner = c:MUG }
	}
	# Give Oudh to Mughals
	if = {
		limit = { exists = s:STATE_AWADH.region_state:BIC }
		s:STATE_AWADH.region_state:BIC = { set_state_owner = c:MUG }
	}
	# Mughal independence war diplomatic play
	if = {
		limit = {
			NOT = {
				any_diplomatic_play = {
					target = { this = c:MUG }
					initiator = { this = c:BIC }
					is_diplomatic_play_type = dp_secession
				}
			}
		}
		create_diplomatic_play = {
			name = sepoy_mutiny
			type = dp_annex_war
			escalation = 80
			target_state = s:STATE_DELHI.region_state:MUG
		}
		# Add Britain
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:MUG ?= this
				}
			}
			if = {
				limit = {
					initiator = {
						is_subject = yes
					}
				}
				add_initiator_backers = { initiator.top_overlord }
			}
		}
		# Add wargoals
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:MUG ?= this
				}
			}
			add_war_goal = {
				holder = c:MUG
				type = war_reparations
				target_country = c:BIC
			}
		}
	}
	# Sikh uprising
	# Sikh independence war diplomatic play
	if = {
		limit = {
			has_global_variable = sepoy_mutiny_sikh_uprising_global_var
		}
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:MUG ?= this
				}
			}
			add_target_backers = { c:PAN }
			if = {
				limit = {
					initiator = {
						is_subject = yes
					}
				}
				add_initiator_backers = { initiator.top_overlord }
			}
		}
		# Add wargoals
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:MUG ?= this
				}
			}
			# Hill Punjab State
			if = {
				limit = {
					exists = s:STATE_HILL_PUNJAB.region_state:PAN 
				}
				add_war_goal = {
					holder = c:BIC
					type = conquer_state
					target_state = s:STATE_HILL_PUNJAB.region_state:PAN
				}
			}
			# Punjab State
			if = {
				limit = {
					exists = s:STATE_PUNJAB.region_state:BIC 
				}
				add_war_goal = {
					holder = c:PAN
					type = conquer_state
					target_state = s:STATE_PUNJAB.region_state:BIC
				}
			}
			# North West Frontier State
			if = {
				limit = {
					exists = s:STATE_PASHTUNISTAN.region_state:BIC 
				}
				add_war_goal = {
					holder = c:PAN
					type = conquer_state
					target_state = s:STATE_PASHTUNISTAN.region_state:BIC
				}
			}
		}
	}
	# Bengal independence war diplomatic play
	if = {
		limit = {
			NOT = {
				any_diplomatic_play = {
					target = { this = c:BGL }
					initiator = { this = c:BIC }
					is_diplomatic_play_type = dp_secession
				}
			}
		}
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:MUG ?= this
				}
			}
			add_target_backers = { c:BGL }
		}
		# Add wargoals
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:MUG ?= this
				}
			}
			# East Bengal State
			if = {
				limit = {
					exists = s:STATE_EAST_BENGAL.region_state:BGL 
				}
				add_war_goal = {
					holder = c:BIC
					type = conquer_state
					target_state = s:STATE_EAST_BENGAL.region_state:BGL
				}
			}
			# Bihar State
			if = {
				limit = {
					exists = s:STATE_BIHAR.region_state:BIC 
				}
				add_war_goal = {
					holder = c:BGL
					type = conquer_state
					target_state = s:STATE_BIHAR.region_state:BIC
				}
			}
			# West Bengal State
			if = {
				limit = {
					exists = s:STATE_WEST_BENGAL.region_state:BIC 
				}
				add_war_goal = {
					holder = c:BGL
					type = conquer_state
					target_state = s:STATE_WEST_BENGAL.region_state:BIC
				}
			}
			# Assam State
			if = {
				limit = {
					exists = s:STATE_ASSAM.region_state:BIC 
				}
				add_war_goal = {
					holder = c:BGL
					type = conquer_state
					target_state = s:STATE_ASSAM.region_state:BIC
				}
			}
			# Orissa State
			if = {
				limit = {
					exists = s:STATE_ORISSA.region_state:BIC 
				}
				add_war_goal = {
					holder = c:BGL
					type = conquer_state
					target_state = s:STATE_ORISSA.region_state:BIC
				}
			}
		}
	}
}
sepoy_mutiny_bengal_effect_critical = {
	# Destroy a random non-capital barracks
	if = {
		limit = {
			any_scope_state = {
				OR = {
					region = sr:region_bengal
					region = sr:region_punjab
					region = sr:region_central_india
				}
				NOT = {
					state_region = s:STATE_WEST_BENGAL
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
		}
		random_scope_state = {
			limit = {
				OR = {
					region = sr:region_bengal
					region = sr:region_punjab
					region = sr:region_central_india
				}
				NOT = {
					state_region = s:STATE_WEST_BENGAL
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
			remove_building = building_barracks
			add_modifier = {
				name = sepoy_mutiny_barracks_destruction_modifier
				months = normal_modifier_time
				multiplier = 2
			}
			add_radicals_in_state = {
				value = very_large_radicals
			}
			save_scope_as = bengal_sepoy_barracks_scope
		}
	}
	# Add negative modifiers to every other barracks
	if = {
		limit = {
			any_scope_state = {
				OR = {
					region = sr:region_bengal
					region = sr:region_punjab
					region = sr:region_central_india
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}
			}
		}
		every_scope_state = {
			limit = {
				OR = {
					region = sr:region_bengal
					region = sr:region_punjab
					region = sr:region_central_india
				}	
				any_scope_building = {
					is_building_type = building_barracks
				}
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}				
			}
			add_modifier = {
				name = sepoy_mutiny_barracks_unrest_modifier
				months = normal_modifier_time
				multiplier = 2
			}
			add_radicals_in_state = {
				value = very_large_radicals
			}
		}
	}
	# Mughal uprising
	# Give Agra to Mughals
	if = {
		limit = { exists = s:STATE_AGRA.region_state:BIC }
		s:STATE_AGRA.region_state:BIC = { set_state_owner = c:MUG }
	}
	# Give Oudh to Mughals
	if = {
		limit = { exists = s:STATE_AWADH.region_state:BIC }
		s:STATE_AWADH.region_state:BIC = { set_state_owner = c:MUG }
	}
	# Mughal independence war diplomatic play
	if = {
		limit = {
			NOT = {
				any_diplomatic_play = {
					target = { this = c:MUG }
					initiator = { this = c:BIC }
					is_diplomatic_play_type = dp_secession
				}
			}
		}
		create_diplomatic_play = {
			name = sepoy_mutiny
			type = dp_annex_war
			escalation = 80
			target_state = s:STATE_DELHI.region_state:MUG
		}
		# Add Britain
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:MUG ?= this
				}
			}
			if = {
				limit = {
					initiator = {
						is_subject = yes
					}
				}
				add_initiator_backers = { initiator.top_overlord }
			}
		}
		# Add wargoals
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:MUG ?= this
				}
			}
			add_war_goal = {
				holder = c:MUG
				type = war_reparations
				target_country = c:BIC
			}
		}
	}
	# Sikh uprising
	# Give Punjab to Sikhs
	if = {
		limit = { 
			has_global_variable = sepoy_mutiny_sikh_uprising_global_var
			exists = s:STATE_PUNJAB.region_state:BIC 
		}
		s:STATE_PUNJAB.region_state:BIC = { set_state_owner = c:PAN }
	}
	# Sikh independence war diplomatic play
	if = {
		limit = {
			has_global_variable = sepoy_mutiny_sikh_uprising_global_var
			NOT = {
				any_diplomatic_play = {
					target = { this = c:PAN }
					initiator = { this = c:BIC }
					is_diplomatic_play_type = dp_secession
				}
			}
		}
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:MUG ?= this
				}
			}
			add_target_backers = { c:PAN }
		}
		# Add wargoals
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:MUG ?= this
				}
			}
			# North West Frontier State
			if = {
				limit = {
					exists = s:STATE_PASHTUNISTAN.region_state:BIC 
				}
				add_war_goal = {
					holder = c:PAN
					type = conquer_state
					target_state = s:STATE_PASHTUNISTAN.region_state:BIC
				}
			}
			# Hill Punjab State
			if = {
				limit = {
					exists = s:STATE_HILL_PUNJAB.region_state:PAN 
				}
				add_war_goal = {
					holder = c:BIC
					type = conquer_state
					target_state = s:STATE_HILL_PUNJAB.region_state:PAN
				}
			}
			# Punjab State
			if = {
				limit = {
					exists = s:STATE_PUNJAB.region_state:PAN 
				}
				add_war_goal = {
					holder = c:BIC
					type = conquer_state
					target_state = s:STATE_PUNJAB.region_state:PAN
				}
			}
		}
	}
	# Give Bihar to Bengal
	if = {
		limit = { exists = s:STATE_BIHAR.region_state:BIC }
		s:STATE_BIHAR.region_state:BIC = { set_state_owner = c:BGL }
	}
	# Bengal independence war diplomatic play
	if = {
		limit = {
			NOT = {
				any_diplomatic_play = {
					target = { this = c:BGL }
					initiator = { this = c:BIC }
					is_diplomatic_play_type = dp_secession
				}
			}
		}
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:MUG ?= this
				}
			}
			add_target_backers = { c:BGL }
		}
		# Add wargoals
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:MUG ?= this
				}
			}
			# Bihar State
			if = {
				limit = {
					exists = s:STATE_BIHAR.region_state:BIC 
				}
				add_war_goal = {
					holder = c:BGL
					type = conquer_state
					target_state = s:STATE_BIHAR.region_state:BIC
				}
			}
			# West Bengal State
			if = {
				limit = {
					exists = s:STATE_WEST_BENGAL.region_state:BIC 
				}
				add_war_goal = {
					holder = c:BGL
					type = conquer_state
					target_state = s:STATE_WEST_BENGAL.region_state:BIC
				}
			}
			# Assam State
			if = {
				limit = {
					exists = s:STATE_ASSAM.region_state:BIC 
				}
				add_war_goal = {
					holder = c:BGL
					type = conquer_state
					target_state = s:STATE_ASSAM.region_state:BIC
				}
			}
			# Orissa State
			if = {
				limit = {
					exists = s:STATE_ORISSA.region_state:BIC 
				}
				add_war_goal = {
					holder = c:BGL
					type = conquer_state
					target_state = s:STATE_ORISSA.region_state:BIC
				}
			}
			# East Bengal State
			if = {
				limit = {
					exists = s:STATE_EAST_BENGAL.region_state:BGL 
				}
				add_war_goal = {
					holder = c:BIC
					type = conquer_state
					target_state = s:STATE_EAST_BENGAL.region_state:BGL
				}
			}
			# Bihar State
			if = {
				limit = {
					exists = s:STATE_BIHAR.region_state:BGL 
				}
				add_war_goal = {
					holder = c:BIC
					type = conquer_state
					target_state = s:STATE_BIHAR.region_state:BGL
				}
			}
		}
	}
}

sepoy_mutiny_bombay_effect_low = {
	# Low Effect - historical
	# Destroy a random non-capital barracks
	if = {
		limit = {
			any_scope_state = {
				region = sr:region_bombay
				NOT = {
					state_region = s:STATE_BOMBAY
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
		}
		random_scope_state = {
			limit = {
				region = sr:region_bombay
				NOT = {
					state_region = s:STATE_BOMBAY
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
			remove_building = building_barracks
			add_modifier = {
				name = sepoy_mutiny_barracks_destruction_modifier
				months = normal_modifier_time
				multiplier = 0.5
			}
			add_radicals_in_state = {
				value = small_radicals
			}
			save_scope_as = bengal_sepoy_barracks_scope
		}
	}
	# Add negative modifiers to every other barracks
	if = {
		limit = {
			any_scope_state = {
				region = sr:region_bombay
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}
			}
		}
		every_scope_state = {
			limit = {
				region = sr:region_bombay
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}				
			}
			add_modifier = {
				name = sepoy_mutiny_barracks_unrest_modifier
				months = normal_modifier_time
				multiplier = 0.5
			}
			add_radicals_in_state = {
				value = small_radicals
			}
		}
	}
}
sepoy_mutiny_bombay_effect_medium = {
	# Medium Effect
	# Destroy a random non-capital barracks
	if = {
		limit = {
			any_scope_state = {
				region = sr:region_bombay
				NOT = {
					state_region = s:STATE_BOMBAY
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
		}
		random_scope_state = {
			limit = {
				region = sr:region_bombay
				NOT = {
					state_region = s:STATE_BOMBAY
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
			remove_building = building_barracks
			add_modifier = {
				name = sepoy_mutiny_barracks_destruction_modifier
				months = normal_modifier_time
			}
			add_radicals_in_state = {
				value = medium_radicals
			}
			save_scope_as = bengal_sepoy_barracks_scope
		}
	}
	# Add negative modifiers to every other barracks
	if = {
		limit = {
			any_scope_state = {
				region = sr:region_bombay
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}
			}
		}
		every_scope_state = {
			limit = {
				region = sr:region_bombay
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}				
			}
			add_modifier = {
				name = sepoy_mutiny_barracks_unrest_modifier
				months = normal_modifier_time
			}
			add_radicals_in_state = {
				value = medium_radicals
			}
		}
	}
	# Maratha independence war diplomatic play
	if = {
		limit = {
			NOT = {
				any_diplomatic_play = {
					target = { this = c:SAT }
					initiator = { this = c:BIC }
					is_diplomatic_play_type = dp_secession
				}
			}
		}
		create_diplomatic_play = {
			name = maratha_rebellion
			type = dp_annex_war
			escalation = 80
			target_state = s:STATE_BOMBAY.region_state:SAT
		}
		# Add Britain
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:SAT ?= this
				}
			}
			if = {
				limit = {
					initiator = {
						is_subject = yes
					}
				}
				add_initiator_backers = { initiator.top_overlord }
			}
		}
		# Add wargoals
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:SAT ?= this
				}
			}
			# Bombay State
			if = {
				limit = {
					exists = s:STATE_BOMBAY.region_state:BIC 
				}
				add_war_goal = {
					holder = c:SAT
					type = conquer_state
					target_state = s:STATE_BOMBAY.region_state:BIC
				}
			}
		}
	}
}
sepoy_mutiny_bombay_effect_high = {
	# High Effect
	# Destroy a random non-capital barracks
	if = {
		limit = {
			any_scope_state = {
				region = sr:region_bombay
				NOT = {
					state_region = s:STATE_BOMBAY
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
		}
		random_scope_state = {
			limit = {
				region = sr:region_bombay
				NOT = {
					state_region = s:STATE_BOMBAY
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
			remove_building = building_barracks
			add_modifier = {
				name = sepoy_mutiny_barracks_destruction_modifier
				months = normal_modifier_time
				multiplier = 1.5
			}
			add_radicals_in_state = {
				value = large_radicals
			}
			save_scope_as = bengal_sepoy_barracks_scope
		}
	}
	# Add negative modifiers to every other barracks
	if = {
		limit = {
			any_scope_state = {
				region = sr:region_bombay
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}
			}
		}
		every_scope_state = {
			limit = {
				region = sr:region_bombay
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}				
			}
			add_modifier = {
				name = sepoy_mutiny_barracks_unrest_modifier
				months = normal_modifier_time
				multiplier = 1.5
			}
			add_radicals_in_state = {
				value = large_radicals
			}
		}
	}
	# Maratha independence war diplomatic play
	if = {
		limit = {
			NOT = {
				any_diplomatic_play = {
					target = { this = c:SAT }
					initiator = { this = c:BIC }
					is_diplomatic_play_type = dp_secession
				}
			}
		}
		create_diplomatic_play = {
			name = maratha_rebellion
			type = dp_annex_war
			escalation = 80
			target_state = s:STATE_BOMBAY.region_state:SAT
		}
		# Add Britain
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:SAT ?= this
				}
			}
			if = {
				limit = {
					initiator = {
						is_subject = yes
					}
				}
				add_initiator_backers = { initiator.top_overlord }
			}
		}
		# Add wargoals
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:SAT ?= this
				}
			}
			# Bombay State
			if = {
				limit = {
					exists = s:STATE_BOMBAY.region_state:BIC 
				}
				add_war_goal = {
					holder = c:SAT
					type = conquer_state
					target_state = s:STATE_BOMBAY.region_state:BIC
				}
			}
		}
	}
	# Sindh independence war diplomatic play
	random_diplomatic_play = {
		limit = {
			is_diplomatic_play_type = dp_annex_war
			target = {
				c:SAT ?= this
			}
		}
		add_target_backers = { c:SIN }
		# Add wargoals
		# Sindh State
		if = {
			limit = {
				exists = s:STATE_SINDH.region_state:SIN 
			}
			add_war_goal = {
				holder = c:BIC
				type = conquer_state
				target_state = s:STATE_SINDH.region_state:SIN
			}
		}
	}
}
sepoy_mutiny_bombay_effect_critical = {
	# Critical Effect
	# Destroy a random non-capital barracks
	if = {
		limit = {
			any_scope_state = {
				region = sr:region_bombay
				NOT = {
					state_region = s:STATE_BOMBAY
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
		}
		random_scope_state = {
			limit = {
				region = sr:region_bombay
				NOT = {
					state_region = s:STATE_BOMBAY
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
			remove_building = building_barracks
			add_modifier = {
				name = sepoy_mutiny_barracks_destruction_modifier
				months = normal_modifier_time
				multiplier = 2
			}
			add_radicals_in_state = {
				value = very_large_radicals
			}
			save_scope_as = bengal_sepoy_barracks_scope
		}
	}
	# Add negative modifiers to every other barracks
	if = {
		limit = {
			any_scope_state = {
				region = sr:region_bombay
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}
			}
		}
		every_scope_state = {
			limit = {
				region = sr:region_bombay
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}				
			}
			add_modifier = {
				name = sepoy_mutiny_barracks_unrest_modifier
				months = normal_modifier_time
				multiplier = 2
			}
			add_radicals_in_state = {
				value = very_large_radicals
			}
		}
	}
	# Maratha independence war diplomatic play
	if = {
		limit = {
			NOT = {
				any_diplomatic_play = {
					target = { this = c:SAT }
					initiator = { this = c:BIC }
					is_diplomatic_play_type = dp_secession
				}
			}
		}
		create_diplomatic_play = {
			name = maratha_rebellion
			type = dp_annex_war
			escalation = 80
			target_state = s:STATE_BOMBAY.region_state:SAT
		}
		# Add Britain
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:SAT ?= this
				}
			}
			if = {
				limit = {
					initiator = {
						is_subject = yes
					}
				}
				add_initiator_backers = { initiator.top_overlord }
			}
		}
		# Add wargoals
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:SAT ?= this
				}
			}
			# Bombay State
			if = {
				limit = {
					exists = s:STATE_BOMBAY.region_state:BIC 
				}
				add_war_goal = {
					holder = c:SAT
					type = conquer_state
					target_state = s:STATE_BOMBAY.region_state:BIC
				}
			}
		}
	}
	# Sindh independence war diplomatic play
	if = {
		limit = {
			NOT = {
				any_diplomatic_play = {
					target = { this = c:SIN }
					initiator = { this = c:BIC }
					is_diplomatic_play_type = dp_secession
				}
			}
		}
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:SAT ?= this
				}
			}
			add_target_backers = { c:SIN }
			# Sindh State
			if = {
				limit = {
					exists = s:STATE_SINDH.region_state:SIN 
				}
				add_war_goal = {
					holder = c:BIC
					type = conquer_state
					target_state = s:STATE_SINDH.region_state:SIN
				}
			}
		}
	}
	# Gujarat independence war diplomatic play
	if = {
		limit = {
			NOT = {
				any_diplomatic_play = {
					target = { this = c:GUJ }
					initiator = { this = c:BIC }
					is_diplomatic_play_type = dp_secession
				}
			}
		}
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:SAT ?= this
				}
			}
			add_target_backers = { c:GUJ }
			# Add wargoals
			# Gujarat State
			if = {
				limit = {
					exists = s:STATE_GUJARAT.region_state:BIC 
				}
				add_war_goal = {
					holder = c:GUJ
					type = conquer_state
					target_state = s:STATE_GUJARAT.region_state:BIC
				}
			}
			if = {
				limit = {
					exists = s:STATE_GUJARAT.region_state:GUJ 
				}
				add_war_goal = {
					holder = c:BIC
					type = conquer_state
					target_state = s:STATE_GUJARAT.region_state:GUJ
				}
			}
		}
	}
}

sepoy_mutiny_madras_effect_low = {
	# Low Effect - historical
	# Destroy a random non-capital barracks
	if = {
		limit = {
			any_scope_state = {
				region = sr:region_madras
				NOT = {
					state_region = s:STATE_MADRAS
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
		}
		random_scope_state = {
			limit = {
				region = sr:region_madras
				NOT = {
					state_region = s:STATE_MADRAS
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
			remove_building = building_barracks
			add_modifier = {
				name = sepoy_mutiny_barracks_destruction_modifier
				months = normal_modifier_time
				multiplier = 0.5
			}
			add_radicals_in_state = {
				value = small_radicals
			}
			save_scope_as = bengal_sepoy_barracks_scope
		}
	}
	# Add negative modifiers to every other barracks
	if = {
		limit = {
			any_scope_state = {
				region = sr:region_madras
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}
			}
		}
		every_scope_state = {
			limit = {
				region = sr:region_madras
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}				
			}
			add_modifier = {
				name = sepoy_mutiny_barracks_unrest_modifier
				months = normal_modifier_time
				multiplier = 0.5
			}
			add_radicals_in_state = {
				value = small_radicals
			}
		}
	}
	# Kurnool independence war diplomatic play
	if = {
		limit = {
			NOT = {
				any_diplomatic_play = {
					target = { this = c:KNO }
					initiator = { this = c:BIC }
					is_diplomatic_play_type = dp_secession
				}
			}
		}
		create_diplomatic_play = {
			name = kurnool_uprising
			type = dp_annex_war
			escalation = 80
			target_state = s:STATE_KURNOOL.region_state:KNO
		}
		# Add Britain
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:KNO ?= this
				}
			}
			if = {
				limit = {
					initiator = {
						is_subject = yes
					}
				}
				add_initiator_backers = { initiator.top_overlord }
			}
		}
		# Add wargoals
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:KNO ?= this
				}
			}
			# Kurnool State
			if = {
				limit = {
					exists = s:STATE_KURNOOL.region_state:BIC 
				}
				add_war_goal = {
					holder = c:KNO
					type = conquer_state
					target_state = s:STATE_KURNOOL.region_state:BIC
				}
			}
			# Northern Circars State
			if = {
				limit = {
					exists = s:STATE_CIRCARS.region_state:BIC 
				}
				add_war_goal = {
					holder = c:KNO
					type = conquer_state
					target_state = s:STATE_CIRCARS.region_state:BIC
				}
			}
		}
	}
}
sepoy_mutiny_madras_effect_medium = {
	# Medium Effect
	# Destroy a random non-capital barracks
	if = {
		limit = {
			any_scope_state = {
				region = sr:region_madras
				NOT = {
					state_region = s:STATE_MADRAS
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
		}
		random_scope_state = {
			limit = {
				region = sr:region_madras
				NOT = {
					state_region = s:STATE_MADRAS
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
			remove_building = building_barracks
			add_modifier = {
				name = sepoy_mutiny_barracks_destruction_modifier
				months = normal_modifier_time
			}
			add_radicals_in_state = {
				value = medium_radicals
			}
			save_scope_as = bengal_sepoy_barracks_scope
		}
	}
	# Add negative modifiers to every other barracks
	if = {
		limit = {
			any_scope_state = {
				region = sr:region_madras
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}
			}
		}
		every_scope_state = {
			limit = {
				region = sr:region_madras
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}				
			}
			add_modifier = {
				name = sepoy_mutiny_barracks_unrest_modifier
				months = normal_modifier_time
			}
			add_radicals_in_state = {
				value = medium_radicals
			}
		}
	}
	# Kurnool independence war diplomatic play
	if = {
		limit = {
			NOT = {
				any_diplomatic_play = {
					target = { this = c:KNO }
					initiator = { this = c:BIC }
					is_diplomatic_play_type = dp_secession
				}
			}
		}
		create_diplomatic_play = {
			name = kurnool_uprising
			type = dp_annex_war
			escalation = 80
			target_state = s:STATE_KURNOOL.region_state:KNO
		}
		# Add Britain
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:KNO ?= this
				}
			}
			if = {
				limit = {
					initiator = {
						is_subject = yes
					}
				}
				add_initiator_backers = { initiator.top_overlord }
			}
		}
		# Add wargoals
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:KNO ?= this
				}
			}
			# Kurnool State
			if = {
				limit = {
					exists = s:STATE_KURNOOL.region_state:BIC 
				}
				add_war_goal = {
					holder = c:KNO
					type = conquer_state
					target_state = s:STATE_KURNOOL.region_state:BIC
				}
			}
			# Northern Circars State
			if = {
				limit = {
					exists = s:STATE_CIRCARS.region_state:BIC 
				}
				add_war_goal = {
					holder = c:KNO
					type = conquer_state
					target_state = s:STATE_CIRCARS.region_state:BIC
				}
			}
		}
	}
}
sepoy_mutiny_madras_effect_high = {
	# High Effect
	# Destroy a random non-capital barracks
	if = {
		limit = {
			any_scope_state = {
				region = sr:region_madras
				NOT = {
					state_region = s:STATE_MADRAS
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
		}
		random_scope_state = {
			limit = {
				region = sr:region_madras
				NOT = {
					state_region = s:STATE_MADRAS
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
			remove_building = building_barracks
			add_modifier = {
				name = sepoy_mutiny_barracks_destruction_modifier
				months = normal_modifier_time
				multiplier = 1.5
			}
			add_radicals_in_state = {
				value = large_radicals
			}
			save_scope_as = bengal_sepoy_barracks_scope
		}
	}
	# Add negative modifiers to every other barracks
	if = {
		limit = {
			any_scope_state = {
				region = sr:region_madras
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}
			}
		}
		every_scope_state = {
			limit = {
				region = sr:region_madras
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}				
			}
			add_modifier = {
				name = sepoy_mutiny_barracks_unrest_modifier
				months = normal_modifier_time
				multiplier = 1.5
			}
			add_radicals_in_state = {
				value = large_radicals
			}
		}
	}
	# Give all of Kurnool to Kurnool
	if = {
		limit = { exists = s:STATE_KURNOOL.region_state:BIC }
		s:STATE_KURNOOL.region_state:BIC = { set_state_owner = c:KNO }
	}
	# Kurnool independence war diplomatic play
	if = {
		limit = {
			NOT = {
				any_diplomatic_play = {
					target = { this = c:KNO }
					initiator = { this = c:BIC }
					is_diplomatic_play_type = dp_secession
				}
			}
		}
		create_diplomatic_play = {
			name = kurnool_uprising
			type = dp_annex_war
			escalation = 80
			target_state = s:STATE_KURNOOL.region_state:KNO
		}
		# Add Britain
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:KNO ?= this
				}
			}
			if = {
				limit = {
					initiator = {
						is_subject = yes
					}
				}
				add_initiator_backers = { initiator.top_overlord }
			}
		}
		# Add wargoals
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:KNO ?= this
				}
			}
			# Kurnool State
			if = {
				limit = {
					exists = s:STATE_KURNOOL.region_state:BIC 
				}
				add_war_goal = {
					holder = c:KNO
					type = conquer_state
					target_state = s:STATE_KURNOOL.region_state:BIC
				}
			}
			# Northern Circars State
			if = {
				limit = {
					exists = s:STATE_CIRCARS.region_state:BIC 
				}
				add_war_goal = {
					holder = c:KNO
					type = conquer_state
					target_state = s:STATE_CIRCARS.region_state:BIC
				}
			}
		}
	}
}
sepoy_mutiny_madras_effect_critical = {
	# Critical Effect
	# Destroy a random non-capital barracks
	if = {
		limit = {
			any_scope_state = {
				region = sr:region_madras
				NOT = {
					state_region = s:STATE_MADRAS
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
		}
		random_scope_state = {
			limit = {
				region = sr:region_madras
				NOT = {
					state_region = s:STATE_MADRAS
				}
				any_scope_building = {
					is_building_type = building_barracks
				}
			}
			remove_building = building_barracks
			add_modifier = {
				name = sepoy_mutiny_barracks_destruction_modifier
				months = normal_modifier_time
				multiplier = 2
			}
			add_radicals_in_state = {
				value = very_large_radicals
			}
			save_scope_as = bengal_sepoy_barracks_scope
		}
	}
	# Add negative modifiers to every other barracks
	if = {
		limit = {
			any_scope_state = {
				region = sr:region_madras
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}
			}
		}
		every_scope_state = {
			limit = {
				region = sr:region_madras
				NOT = {
					scope:bengal_sepoy_barracks_scope ?= this
				}				
			}
			add_modifier = {
				name = sepoy_mutiny_barracks_unrest_modifier
				months = normal_modifier_time
				multiplier = 2
			}
			add_radicals_in_state = {
				value = very_large_radicals
			}
		}
	}
	# Give all of Kurnool to Kurnool
	if = {
		limit = { exists = s:STATE_KURNOOL.region_state:BIC }
		s:STATE_KURNOOL.region_state:BIC = { set_state_owner = c:KNO }
	}
	# Kurnool independence war diplomatic play
	if = {
		limit = {
			NOT = {
				any_diplomatic_play = {
					target = { this = c:KNO }
					initiator = { this = c:BIC }
					is_diplomatic_play_type = dp_secession
				}
			}
		}
		create_diplomatic_play = {
			name = kurnool_uprising
			type = dp_annex_war
			escalation = 80
			target_state = s:STATE_KURNOOL.region_state:KNO
		}
		# Add Britain
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:KNO ?= this
				}
			}
			if = {
				limit = {
					initiator = {
						is_subject = yes
					}
				}
				add_initiator_backers = { initiator.top_overlord }
			}
		}
		# Add wargoals
		random_diplomatic_play = {
			limit = {
				is_diplomatic_play_type = dp_annex_war
				target = {
					c:KNO ?= this
				}
			}
			# Kurnool State
			if = {
				limit = {
					exists = s:STATE_KURNOOL.region_state:BIC 
				}
				add_war_goal = {
					holder = c:KNO
					type = conquer_state
					target_state = s:STATE_KURNOOL.region_state:BIC
				}
			}
			# Northern Circars State
			if = {
				limit = {
					exists = s:STATE_CIRCARS.region_state:BIC 
				}
				add_war_goal = {
					holder = c:KNO
					type = conquer_state
					target_state = s:STATE_CIRCARS.region_state:BIC
				}
			}
		}
	}
	# Carnatic independence war diplomatic play
	random_diplomatic_play = {
		limit = {
			is_diplomatic_play_type = dp_annex_war
			target = {
				c:KNO ?= this
			}
		}
		add_target_backers = { c:CAR }
	}
	# Add wargoals
	random_diplomatic_play = {
		limit = {
			is_diplomatic_play_type = dp_annex_war
			target = {
				c:KNO ?= this
			}
		}
		add_target_backers = { c:CAR }
		# Madras State
		if = {
			limit = {
				exists = s:STATE_MADRAS.region_state:BIC 
			}
			add_war_goal = {
				holder = c:CAR
				type = conquer_state
				target_state = s:STATE_MADRAS.region_state:BIC
			}
		}
		if = {
			limit = {
				exists = s:STATE_MADRAS.region_state:CAR 
			}
			add_war_goal = {
				holder = c:CAR
				type = conquer_state
				target_state = s:STATE_MADRAS.region_state:CAR
			}
		}
	}
}

# princely states with low liberty desire join the EIC in the war. Princely states with medium liberty desire will stay neutral (exempt from service)
sepoy_mutiny_princely_states_stance_effect = {
	every_subject_or_below = {
		limit = {
			capital = {
				OR = {
					region = sr:region_bengal
					region = sr:region_bombay
					region = sr:region_madras
					region = sr:region_punjab
					region = sr:region_central_india
					region = sr:region_himalayas
					region = sr:region_persia
				}
			}
			liberty_desire >= 75
		}
		set_variable = sepoy_mutiny_princely_state_low_loyalty_var
		sepoy_mutiny_remove_puppet_effect = yes
	}
	every_subject_or_below = {
		limit = {
			capital = {
				OR = {
					region = sr:region_bengal
					region = sr:region_bombay
					region = sr:region_madras
					region = sr:region_punjab
					region = sr:region_central_india
					region = sr:region_himalayas
					region = sr:region_persia
				}
			}
			liberty_desire < 25
			liberty_desire > 75
		}
		set_variable = sepoy_mutiny_princely_state_medium_loyalty_var
		root = {
			create_diplomatic_pact = {
				country = prev
				type = exempt_from_service
			}
		}
	}
}

sepoy_mutiny_remove_puppet_effect = {
	c:BIC.power_bloc ?= {
		add_leverage = { target = PREV value = -500 }
	}
	if = {
		limit = {
			this = {
				has_diplomatic_pact = {
					who = c:BIC
					type = tributary
				}
			}
		}
		this = {
			remove_diplomatic_pact = {
				country = c:BIC
				type = tributary
			}
		}
	}
	if = {
		limit = {
			this = {
				has_diplomatic_pact = {
					who = c:BIC
					type = vassal
				}
			}
		}
		this = {
			remove_diplomatic_pact = {
				country = c:BIC
				type = vassal
			}
		}
	}
	if = {
		limit = {
			this = {
				has_diplomatic_pact = {
					who = c:BIC
					type = protectorate
				}
			}
		}
		this = {
			remove_diplomatic_pact = {
				country = c:BIC
				type = protectorate
			}
		}
	}
	if = {
		limit = {
			this = {
				has_diplomatic_pact = {
					who = c:BIC
					type = puppet
				}
			}
		}
		this = {
			remove_diplomatic_pact = {
				country = c:BIC
				type = puppet
			}
		}
	}
}

sepoy_mutiny_apply_laws_effect = {
	set_country_type = unrecognized
	activate_law = law_type:law_monarchy
	activate_law = law_type:law_autocracy
}

sepoy_mutiny_tag_specific_war_goals = {
	if = {
		limit = {
			exists = s:STATE_TRAVANCORE.region_state:BIC
			root = {
				country_has_primary_culture = cu:malayalam
			}
		}
		add_war_goal = {
			holder = root
			type = conquer_state
			target_state = s:STATE_TRAVANCORE.region_state:BIC
		}
	}
	if = {
		limit = {
			exists = s:STATE_RAJPUTANA.region_state:BIC
			root = {
				country_has_primary_culture = cu:rajput
			}
		}
		add_war_goal = {
			holder = root
			type = conquer_state
			target_state = s:STATE_RAJPUTANA.region_state:BIC
		}
	}
	if = {
		limit = {
			exists = s:STATE_MYSORE.region_state:BIC
			root = {
				country_has_primary_culture = cu:kannada
			}
		}
		add_war_goal = {
			holder = root
			type = conquer_state
			target_state = s:STATE_MYSORE.region_state:BIC
		}
	}
	if = {
		limit = {
			exists = s:STATE_ORISSA.region_state:BIC
			root = {
				country_has_primary_culture = cu:oriya
			}
		}
		add_war_goal = {
			holder = root
			type = conquer_state
			target_state = s:STATE_ORISSA.region_state:BIC
		}
	}
	if = {
		limit = {
			exists = s:STATE_ASSAM.region_state:BIC
			root = {
				country_has_primary_culture = cu:assamese
			}
		}
		add_war_goal = {
			holder = root
			type = conquer_state
			target_state = s:STATE_ASSAM.region_state:BIC
		}
	}
	if = {
		limit = {
			exists = s:STATE_PASHTUNISTAN.region_state:BIC
			root = {
				country_has_primary_culture = cu:pashtun
			}
		}
		add_war_goal = {
			holder = root
			type = conquer_state
			target_state = s:STATE_PASHTUNISTAN.region_state:BIC
		}
	}
	if = {
		limit = {
			exists = s:STATE_BALUCHISTAN.region_state:BIC
			root = {
				country_has_primary_culture = cu:baluchi
			}
		}
		add_war_goal = {
			holder = root
			type = conquer_state
			target_state = s:STATE_BALUCHISTAN.region_state:BIC
		}
	}
	if = {
		limit = {
			exists = s:STATE_QUETTA.region_state:BIC
			root = {
				OR = {
					country_has_primary_culture = cu:baluchi
					country_has_primary_culture = cu:pashtun
				}
			}
		}
		add_war_goal = {
			holder = root
			type = conquer_state
			target_state = s:STATE_QUETTA.region_state:BIC
		}
	}
	if = {
		limit = {
			exists = s:STATE_CENTRAL_PROVINCES.region_state:BIC
			root = {
				OR = {
					country_has_primary_culture = cu:marathi
					country_has_primary_culture = cu:bundeli
					country_has_primary_culture = cu:bageli
				}
			}
		}
		add_war_goal = {
			holder = root
			type = conquer_state
			target_state = s:STATE_QUETTA.region_state:BIC
		}
	}
	if = {
		limit = {
			exists = s:STATE_HILL_PUNJAB.region_state:BIC
			root = {
				OR = {
					country_has_primary_culture = cu:panjabi
					country_has_primary_culture = cu:pahari
				}
			}
		}
		add_war_goal = {
			holder = root
			type = conquer_state
			target_state = s:STATE_HILL_PUNJAB.region_state:BIC
		}
	}
}
sepoy_mutiny_run_all_effects = {
	# Bengal Presidency
	if = {
		limit = {
			has_variable = sepoy_mutiny_bengal_effect_critical
		}
		sepoy_mutiny_bengal_effect_critical = yes
	}
	if = {
		limit = {
			has_variable = sepoy_mutiny_bengal_effect_high
		}
		sepoy_mutiny_bengal_effect_high = yes
	}
	if = {
		limit = {
			has_variable = sepoy_mutiny_bengal_effect_medium
		}
		sepoy_mutiny_bengal_effect_medium = yes
	}
	if = {
		limit = {
			has_variable = sepoy_mutiny_bengal_effect_low
		}
		sepoy_mutiny_bengal_effect_low = yes
	}
	# Bombay Presidency
	if = {
		limit = {
			has_variable = sepoy_mutiny_bombay_effect_critical
		}
		sepoy_mutiny_bombay_effect_critical = yes
	}
	if = {
		limit = {
			has_variable = sepoy_mutiny_bombay_effect_high
		}
		sepoy_mutiny_bombay_effect_high = yes
	}
	if = {
		limit = {
			has_variable = sepoy_mutiny_bombay_effect_medium
		}
		sepoy_mutiny_bombay_effect_medium = yes
	}
	if = {
		limit = {
			has_variable = sepoy_mutiny_bombay_effect_low
		}
		sepoy_mutiny_bombay_effect_low = yes
	}
	# Madras Presidency
	if = {
		limit = {
			has_variable = sepoy_mutiny_madras_effect_critical
		}
		sepoy_mutiny_madras_effect_critical = yes
	}
	if = {
		limit = {
			has_variable = sepoy_mutiny_madras_effect_high
		}
		sepoy_mutiny_madras_effect_high = yes
	}
	if = {
		limit = {
			has_variable = sepoy_mutiny_madras_effect_medium
		}
		sepoy_mutiny_madras_effect_medium = yes
	}
	if = {
		limit = {
			has_variable = sepoy_mutiny_madras_effect_low
		}
		sepoy_mutiny_madras_effect_low = yes
	}
	every_country = {
		limit = {
			has_variable = sepoy_mutiny_princely_state_low_loyalty_var
		}
		trigger_event = { id = sepoy_mutiny_events.4 popup = yes }  
	}
}