namespace = french_pretenders_pulse

# The [Dynasty] World
french_pretenders_pulse.1 = {
	type = country_event
	placement = ROOT
	title = french_pretenders_pulse.1.t
	desc = french_pretenders_pulse.1.d
	flavor = french_pretenders_pulse.1.f

	duration = 3

	dlc = dlc004

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"
	gui_window = event_window_1char_tabloid

	left_icon = scope:french_royalist_writer

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	cooldown = { days = normal_modifier_time }

	trigger = {
		any_interest_group = {
			leader = {
				NOT = { has_modifier = popular_royalist_writer }
				OR = {
					AND = {
						has_ideology = ideology:ideology_orleanist
						owner = {
							has_variable = orleanist_restoration_var
						}
					}
					AND = {
						has_ideology = ideology:ideology_legitimist
						owner = {
							has_variable = legitimist_restoration_var
						}
					}
					AND = {
						has_ideology = ideology:ideology_bonapartist
						owner = {
							has_variable = bonapartist_restoration_var
						}
					}
				}
				OR = {
					has_trait = charismatic
					has_trait = inspirational_orator
					has_trait = demagogue
					has_trait = firebrand
				}
			}
		}
	}

	immediate = {
		random_interest_group = {
			limit = {
				leader = {
					NOT = { has_modifier = popular_royalist_writer }
					OR = {
						AND = {
							has_ideology = ideology:ideology_orleanist
							owner = {
								has_variable = orleanist_restoration_var
							}
						}
						AND = {
							has_ideology = ideology:ideology_legitimist
							owner = {
								has_variable = legitimist_restoration_var
							}
						}
						AND = {
							has_ideology = ideology:ideology_bonapartist
							owner = {
								has_variable = bonapartist_restoration_var
							}
						}
					}
					OR = {
						has_trait = charismatic
						has_trait = inspirational_orator
						has_trait = demagogue
						has_trait = firebrand
					}
				}
			}
			save_scope_as = french_royalist_writer_ig
			leader = {
				save_scope_as = french_royalist_writer
			}
		}
	}

	option = {
		name = french_pretenders_pulse.1.a
		default_option = yes

		custom_tooltip = {
			text = french_pretenders_pulse_advance_by_fifteen_percent_tt
			change_variable = {
				name = french_dynastic_primary_progress_var
				add = 18
			}
		}
	}

	option = {
		name = french_pretenders_pulse.1.b
		trigger = {
			OR = {
				has_law = law_type:law_outlawed_dissent
				has_law = law_type:law_censorship
			}
		}
		custom_tooltip = {
			text = french_pretenders_pulse_advance_by_twenty_five_percent_tt
			change_variable = {
				name = french_dynastic_primary_progress_var
				add = 30
			}
		}
	}
	option = {
		name = french_pretenders_pulse.1.c
		scope:french_royalist_writer = {
			add_modifier = {
				name = popular_royalist_writer
				days = short_modifier_time
			}
		}
		add_modifier = {
			name = popular_royalist_book
			days = short_modifier_time
		}
		custom_tooltip = {
			text = french_pretenders_pulse_advance_by_five_percent_tt
			change_variable = {
				name = french_dynastic_primary_progress_var
				add = 6
			}
		}
	}
}

# Fidelity & Perjury
french_pretenders_pulse.2 = {
	type = country_event
	placement = ROOT
	title = french_pretenders_pulse.2.t
	desc = french_pretenders_pulse.2.d
	flavor = french_pretenders_pulse.2.f

	duration = 3

	dlc = dlc004

	event_image = {
		video = "votp_monarch_holding_court"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	cooldown = { days = normal_modifier_time }

	icon = "gfx/interface/icons/event_icons/event_election.dds"

	trigger = {
		NOT = {
			has_variable = fra_divided_monarchists_freeze
		}
		OR = {
			AND = {
				ruler_is_bonapartist = yes
				any_interest_group = {
					is_in_government = yes
					NOT = { has_modifier = upset_royalist_hardliners }
					leader = {
						OR = {
							has_ideology = ideology:ideology_legitimist
							has_ideology = ideology:ideology_orleanist
						}
					}
				}
			}
			AND = {
				ruler_is_orleanist = yes
				any_interest_group = {
					is_in_government = yes
					NOT = { has_modifier = upset_royalist_hardliners }
					leader = {
						OR = {
							has_ideology = ideology:ideology_legitimist
							has_ideology = ideology:ideology_bonapartist
						}
					}
				}
			}
			AND = {
				ruler_is_legitimist = yes
				any_interest_group = {
					is_in_government = yes
					NOT = { has_modifier = upset_royalist_hardliners }
					leader = {
						OR = {
							has_ideology = ideology:ideology_orleanist
							has_ideology = ideology:ideology_bonapartist
						}
					}
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				ruler_is_bonapartist = yes
				any_interest_group = {
					is_in_government = yes
					NOT = { has_modifier = upset_royalist_hardliners }
					leader = {
						OR = {
							has_ideology = ideology:ideology_legitimist
							has_ideology = ideology:ideology_orleanist
						}
					}
				}
			}
			random_interest_group = {
				limit = {
					is_in_government = yes
					NOT = { has_modifier = upset_royalist_hardliners }
					leader = {
						OR = {
							has_ideology = ideology:ideology_legitimist
							has_ideology = ideology:ideology_orleanist
						}
					}
				}
				save_scope_as = royalist_hardliners
			}
		}
		else_if = {
			limit = {
				ruler_is_orleanist = yes
				any_interest_group = {
					is_in_government = yes
					NOT = { has_modifier = upset_royalist_hardliners }
					leader = {
						OR = {
							has_ideology = ideology:ideology_legitimist
							has_ideology = ideology:ideology_bonapartist
						}
					}
				}
			}
			random_interest_group = {
				limit = {
					is_in_government = yes
					NOT = { has_modifier = upset_royalist_hardliners }
					leader = {
						OR = {
							has_ideology = ideology:ideology_legitimist
							has_ideology = ideology:ideology_bonapartist
						}
					}
				}
				save_scope_as = royalist_hardliners
			}
		}
		else_if = {
			limit = {
				ruler_is_legitimist = yes
				any_interest_group = {
					is_in_government = yes
					NOT = { has_modifier = upset_royalist_hardliners }
					leader = {
						OR = {
							has_ideology = ideology:ideology_orleanist
							has_ideology = ideology:ideology_bonapartist
						}
					}
				}
			}
			random_interest_group = {
				limit = {
					is_in_government = yes
					NOT = { has_modifier = upset_royalist_hardliners }
					leader = {
						OR = {
							has_ideology = ideology:ideology_orleanist
							has_ideology = ideology:ideology_bonapartist
						}
					}
				}
				save_scope_as = royalist_hardliners
			}
		}
	}

	option = {
		name = french_pretenders_pulse.2.a
		default_option = yes
		if = {
			limit = {
				scope:royalist_hardliners = {
					leader = {
						has_ideology = ideology:ideology_bonapartist
					}
				}
			}
			custom_tooltip = {
				text = bonapartist_progress_increase_10_tt
				je:je_divided_monarchists = {
				add_progress = { value = 10 name = divided_monarchists_bonapartist_progress_bar }
			}
			}
		}
		if = {
			limit = {
				scope:royalist_hardliners = {
					leader = {
						has_ideology = ideology:ideology_orleanist
					}
				}
			}
			custom_tooltip = {
				text = orleanist_progress_increase_10_tt
				je:je_divided_monarchists = {
				add_progress = { value = 10 name = divided_monarchists_orleanist_progress_bar }
			}
			}
		}
		if = {
			limit = {
				scope:royalist_hardliners = {
					leader = {
						has_ideology = ideology:ideology_legitimist
					}
				}
			}
			custom_tooltip = {
				text = legitimist_progress_increase_10_tt
				je:je_divided_monarchists = {
				add_progress = { value = 10 name = divided_monarchists_legitimist_progress_bar }
			}
			}
		}
	}

	option = {
		name = french_pretenders_pulse.2.b
		scope:royalist_hardliners = {
			add_modifier = {
				name = upset_royalist_hardliners
				days = normal_modifier_time
			}
		}
		if = {
			limit = {
				ruler_is_bonapartist = yes
			}
			custom_tooltip = {
				text = bonapartist_progress_decrease_tick_1_tt
				change_variable = { name = bonapartist_progress_from_effects add = -1 }
			}
		}
		if = {
			limit = {
				ruler_is_orleanist = yes
			}
			custom_tooltip = {
				text = orleanist_progress_decrease_tick_1_tt
				change_variable = { name = orleanist_progress_from_effects add = -1 }
			}
		}
		if = {
			limit = {
				ruler_is_legitimist = yes
			}
			custom_tooltip = {
				text = legitimist_progress_decrease_tick_1_tt
				change_variable = { name = legitimist_progress_from_effects add = -1 }
			}
		}
	}
}

# Strange Bedfellows
french_pretenders_pulse.3 = {
	type = country_event
	placement = ROOT
	title = french_pretenders_pulse.3.t
	desc = french_pretenders_pulse.3.d
	flavor = french_pretenders_pulse.3.f

	duration = 3

	dlc = dlc004

	event_image = {
		video = "votp_monarch_holding_court"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	cooldown = { days = normal_modifier_time }

	icon = "gfx/interface/icons/event_icons/event_election.dds"

	trigger = {
		NOT = {
			has_variable = fra_divided_monarchists_freeze
		}
		has_law = law_type:law_monarchy
		OR = {
			AND = {
				any_interest_group = {
					leader = { has_ideology = ideology:ideology_orleanist }
					is_marginal = no
					is_in_government = no
					NOR = {
						has_modifier = solidarity_in_opposition
						has_modifier = alone_with_principles
					}
				}
				NOT = {
					ruler_is_orleanist = yes
				}
			}
			AND = {
				any_interest_group = {
					leader = { has_ideology = ideology:ideology_legitimist }
					is_marginal = no
					is_in_government = no
					NOR = {
						has_modifier = solidarity_in_opposition
						has_modifier = alone_with_principles
					}
				}
				NOT = {
					ruler_is_legitimist = yes
				}
			}
			AND = {
				any_interest_group = {
					leader = { has_ideology = ideology:ideology_bonapartist }
					is_marginal = no
					is_in_government = no
					NOR = {
						has_modifier = solidarity_in_opposition
						has_modifier = alone_with_principles
					}
				}
				NOT = {
					ruler_is_bonapartist = yes
				}
			}
		}
		any_interest_group = {
			is_in_government = no
			is_marginal = no
			AND = {
				law_stance = {
					law = law_type:law_presidential_republic
					value > neutral
				}
				law_stance = {
					law = law_type:law_parliamentary_republic
					value > neutral
				}
				law_stance = {
					law = law_type:law_monarchy
					value < neutral
				}
			}
		}
	}

	immediate = {
		random_interest_group = {
			limit = {
				OR = {
					AND = {
						leader = { has_ideology = ideology:ideology_orleanist }
						is_in_government = no
						is_marginal = no
						NOT = {
							owner = {
								ruler_is_orleanist = yes
							}
						}
					}
					AND = {
						leader = { has_ideology = ideology:ideology_legitimist }
						is_in_government = no
						is_marginal = no
						NOT = {
							owner = {
								ruler_is_legitimist = yes
							}
						}
					}
					AND = {
						leader = { has_ideology = ideology:ideology_bonapartist }
						is_in_government = no
						is_marginal = no
						NOT = {
							owner = {
								ruler_is_bonapartist = yes
							}
						}
					}
				}
			}
			save_scope_as = monarchists_in_opposition
		}
		random_interest_group = {
			limit = {
				is_in_government = no
				is_marginal = no
				AND = {
					law_stance = {
						law = law_type:law_presidential_republic
						value > neutral
					}
					law_stance = {
						law = law_type:law_parliamentary_republic
						value > neutral
					}
					law_stance = {
						law = law_type:law_monarchy
						value < neutral
					}
				}
			}
			save_scope_as = republicans_in_opposition
		}
	}


	option = {
		name = french_pretenders_pulse.3.a
		default_option = yes
		if = {
			limit = {
				scope:monarchists_in_opposition.leader = {
					has_ideology = ideology:ideology_bonapartist
				}
			}
			custom_tooltip = {
				text = bonapartist_progress_increase_10_tt
				je:je_divided_monarchists = {
				add_progress = { value = 10 name = divided_monarchists_bonapartist_progress_bar }
			}
			}
		}
		if = {
			limit = {
				scope:monarchists_in_opposition.leader = {
					has_ideology = ideology:ideology_orleanist
				}
			}
			custom_tooltip = {
				text = orleanist_progress_increase_10_tt
				je:je_divided_monarchists = {
				add_progress = { value = 10 name = divided_monarchists_orleanist_progress_bar }
			}
			}
		}
		if = {
			limit = {
				scope:monarchists_in_opposition.leader = {
					has_ideology = ideology:ideology_legitimist
				}
			}
			custom_tooltip = {
				text = legitimist_progress_increase_10_tt
				je:je_divided_monarchists = {
				add_progress = { value = 10 name = divided_monarchists_legitimist_progress_bar }
			}
			}
		}
		scope:monarchists_in_opposition = {
			add_modifier = {
				name = solidarity_in_opposition
				days = normal_modifier_time
			}
			leader = {
				set_variable = monarchist_working_with_republicans
			}
		}
		scope:republicans_in_opposition = {
			add_modifier = {
				name = solidarity_in_opposition
				days = normal_modifier_time
			}
			leader = {
				set_variable = republican_working_with_monarchists
			}
		}
	}


	option = {
		name = french_pretenders_pulse.3.b

		scope:monarchists_in_opposition = {
			add_modifier = {
				name = alone_with_principles
				days = normal_modifier_time
			}
		}
		scope:republicans_in_opposition = {
			add_modifier = {
				name = alone_with_principles
				days = normal_modifier_time
			}
		}
	}

	option = {
		name = french_pretenders_pulse.3.c
		if = {
			limit = {
				scope:monarchists_in_opposition.leader = {
					has_ideology = ideology:ideology_bonapartist
				}
			}
			custom_tooltip = {
				text = bonapartist_progress_decrease_10_tt
				je:je_divided_monarchists = {
					add_progress = { value = -10 name = divided_monarchists_bonapartist_progress_bar }
				}
			}
		}
		if = {
			limit = {
				scope:monarchists_in_opposition.leader = {
					has_ideology = ideology:ideology_orleanist
				}
			}
			custom_tooltip = {
				text = orleanist_progress_decrease_10_tt
				je:je_divided_monarchists = {
					add_progress = { value = -10 name = divided_monarchists_orleanist_progress_bar }
				}
			}
		}
		if = {
			limit = {
				scope:monarchists_in_opposition.leader = {
					has_ideology = ideology:ideology_legitimist
				}
			}
			custom_tooltip = {
				text = legitimist_progress_decrease_10_tt
				je:je_divided_monarchists = {
					add_progress = { value = -10 name = divided_monarchists_legitimist_progress_bar }
				}
			}
		}
		scope:monarchists_in_opposition = {
			add_modifier = {
				name = collaboration_collapsed
				days = normal_modifier_time
			}
		}
		scope:republicans_in_opposition = {
			add_modifier = {
				name = collaboration_collapsed
				days = normal_modifier_time
			}
		}
	}
}

# Republican Apostasy
french_pretenders_pulse.4 = {
	type = country_event
	placement = ROOT
	title = french_pretenders_pulse.4.t
	desc = french_pretenders_pulse.4.d
	flavor = french_pretenders_pulse.4.f

	duration = 3

	dlc = dlc004

	event_image = {
		video = "votp_monarch_holding_court"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	cooldown = { days = normal_modifier_time }

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	trigger = {
		var:french_dynastic_primary_progress_var > 5 # sanity check to prevent negative values from the options
		any_interest_group = {
			is_in_government = yes
			OR = {
				AND = {
					leader = {
						has_variable = monarchist_working_with_republicans
						has_ideology = ideology:ideology_orleanist
					}
					owner = {
						has_variable = orleanist_restoration_var
					}
				}
				AND = {
					leader = {
						has_variable = monarchist_working_with_republicans
						has_ideology = ideology:ideology_legitimist
					}
					owner = {
						has_variable = legitimist_restoration_var
					}
				}
				AND = {
					leader = {
						has_variable = monarchist_working_with_republicans
						has_ideology = ideology:ideology_bonapartist
					}
					owner = {
						has_variable = bonapartist_restoration_var
					}
				}
			}
		}
		any_interest_group = {
			leader = {
				has_variable = republican_working_with_monarchists
				is_busy = no
				is_immortal = no
			}
			AND = {
				law_stance = {
					law = law_type:law_presidential_republic
					value > neutral
				}
				law_stance = {
					law = law_type:law_parliamentary_republic
					value > neutral
				}
				law_stance = {
					law = law_type:law_monarchy
					value < neutral
				}
			}
			OR = { # only pick IGs that are valid for both republicanism and the monarchist ideologies
				is_interest_group_type = ig_armed_forces
				is_interest_group_type = ig_petty_bourgeoisie
				is_interest_group_type = ig_industrialists
			}
		}
	}

	immediate = {
		random_interest_group = {
			limit = {
				is_in_government = yes
				OR = {
					AND = {
						leader = {
							has_variable = monarchist_working_with_republicans
							has_ideology = ideology:ideology_orleanist
						}
						owner = {
							has_variable = orleanist_restoration_var
						}
					}
					AND = {
						leader = {
							has_variable = monarchist_working_with_republicans
							has_ideology = ideology:ideology_legitimist
						}
						owner = {
							has_variable = legitimist_restoration_var
						}
					}
					AND = {
						leader = {
							has_variable = monarchist_working_with_republicans
							has_ideology = ideology:ideology_bonapartist
						}
						owner = {
							has_variable = bonapartist_restoration_var
						}
					}
				}
			}
			save_scope_as = monarchist_french_ig
			leader = {
				save_scope_as = monarchist_french_ig_leader
			}
		}
		random_interest_group = {
			limit = {
				leader = {
					has_variable = republican_working_with_monarchists
					is_busy = no
					is_immortal = no
				}
				AND = {
					law_stance = {
						law = law_type:law_presidential_republic
						value > neutral
					}
					law_stance = {
						law = law_type:law_parliamentary_republic
						value > neutral
					}
					law_stance = {
						law = law_type:law_monarchy
						value < neutral
					}
				}
				OR = { # only pick IGs that are valid for both republicanism and the monarchist ideologies
					is_interest_group_type = ig_armed_forces
					is_interest_group_type = ig_petty_bourgeoisie
					is_interest_group_type = ig_industrialists
				}
			}
			save_scope_as = republican_french_ig
			save_scope_as = memento_mori_ig # to reuse the retirement notification
			leader = {
				save_scope_as = republican_french_ig_leader
				save_scope_as = memento_mori_leader # to reuse the retirement notification
			}
		}
	}


	option = {
		name = french_pretenders_pulse.4.a
		default_option = yes

		if = {
			limit = {
				scope:monarchist_french_ig_leader = {
					has_ideology = ideology:ideology_orleanist
				}
			}
			scope:republican_french_ig_leader = {
				set_ideology = ideology:ideology_orleanist
			}
		}
		else_if = {
			limit = {
				scope:monarchist_french_ig_leader = {
					has_ideology = ideology:ideology_legitimist
				}
			}
			scope:republican_french_ig_leader = {
				set_ideology = ideology:ideology_legitimist
			}
		}
		else_if = {
			limit = {
				scope:monarchist_french_ig_leader = {
					has_ideology = ideology:ideology_bonapartist
				}
			}
			scope:republican_french_ig_leader = {
				set_ideology = ideology:ideology_bonapartist
			}
		}


		custom_tooltip = {
			text = french_pretenders_pulse_advance_by_twenty_five_percent_tt
			change_variable = {
				name = french_dynastic_primary_progress_var
				add = 30
			}
		}
	}

	option = {
		name = french_pretenders_pulse.4.b

		post_notification = ig_leader_memento_mori
		custom_tooltip = {
			text = french_pretenders_pulse.4.b.tt
			hidden_effect = {
				scope:republican_french_ig_leader = {
					kill_character = {
						hidden = yes
					}
				}
			}
		}
		scope:republican_french_ig = {
			add_modifier = {
				name = cryptomonarchists_in_our_ranks
				days = normal_modifier_time
			}
		}

		custom_tooltip = {
			text = french_pretenders_pulse_back_by_fifteen_percent_tt
			change_variable = {
				name = french_dynastic_primary_progress_var
				add = -18
			}
		}
	}
}

# The Eternal House of [house]
french_pretenders_pulse.5 = {
	type = country_event
	placement = ROOT
	title = french_pretenders_pulse.5.t
	desc = french_pretenders_pulse.5.d
	flavor = french_pretenders_pulse.5.f

	duration = 3

	dlc = dlc004

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	gui_window = event_window_1char_tabloid

	left_icon = scope:monarch_of_france

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	# Triggered by completing the Cement the Dynasty JE

	immediate = {
		ruler = {
			save_scope_as = monarch_of_france
		}
	}

	option = {
		name = french_pretenders_pulse.5.a
		default_option = yes

		custom_tooltip = {
			text = french_pretenders_the_dynasty_is_secure
		}

		scope:monarch_of_france = {
			add_modifier = {
				name = restitutor_orbis
				days = normal_modifier_time
			}
		}
	}

	option = {
		name = french_pretenders_pulse.5.b

		custom_tooltip = {
			text = french_pretenders_the_dynasty_is_secure
		}
		every_interest_group = {
			limit = {
				OR = {
					AND = {
						leader = { has_ideology = ideology:ideology_orleanist }
						owner = { has_variable = orleanist_restoration_var }
					}
					AND = {
						leader = { has_ideology = ideology:ideology_legitimist }
						owner = { has_variable = legitimist_restoration_var }
					}
					AND = {
						leader = { has_ideology = ideology:ideology_bonapartist }
						owner = { has_variable = bonapartist_restoration_var }
					}
				}
			}
			add_modifier = {
				name = stalwarts_of_the_restoration
				days = normal_modifier_time
			}
		}
	}
}

# Bonapartists draw support from currently ongoing war.
french_pretenders_pulse.10 = {
	type = country_event
	placement = ROOT
	title = french_pretenders_pulse.10.t
	desc = french_pretenders_pulse.10.d
	flavor = french_pretenders_pulse.10.f

	duration = 3

	dlc = dlc004

	event_image = {
		video = "europenorthamerica_before_the_battle"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	cooldown = { days = short_modifier_time }

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	trigger = {
		NOT = {
			has_variable = fra_divided_monarchists_freeze
		}
		any_scope_character = {
			has_ideology = ideology:ideology_bonapartist
		}
		any_scope_war = {
		    has_war_support = {
		        target = ROOT
		        value > 10
		    }
		}
	}

	immediate = {
		random_scope_character = {
			limit = {
				has_ideology = ideology:ideology_bonapartist
			}
			save_scope_as = bonapartist_character
		}
		capital = {
			save_scope_as = capital_scope
		}
	}

	option = {
		name = french_pretenders_pulse.10.a
		trigger = {
			ruler_is_bonapartist = yes
		}
		ruler = {
			add_modifier = {
				name = modifier_popular_french_monarch
				days = normal_modifier_time
			}
		}
		custom_tooltip = {
			text = bonapartist_progress_increase_10_tt
			je:je_divided_monarchists = {
				add_progress = { value = 10 name = divided_monarchists_bonapartist_progress_bar }
			}
		}
	}

	option = {
		name = french_pretenders_pulse.10.b
		default_option = yes
		ig:ig_armed_forces = {
			add_modifier = {
				name = modifier_bonapartist_armed_forces_modifier
				days = normal_modifier_time
			}
		}
		custom_tooltip = {
			text = bonapartist_progress_increase_5_tt
			je:je_divided_monarchists = {
				add_progress = { value = 5 name = divided_monarchists_bonapartist_progress_bar }
			}
		}
	}

	option = {
		name = french_pretenders_pulse.10.c
		custom_tooltip = {
			text = bonapartist_progress_increase_15_tt
			je:je_divided_monarchists = {
				add_progress = { value = 15 name = divided_monarchists_bonapartist_progress_bar }
			}
		}
	}
}

# Orleanists draw support from fruitful international trade.
french_pretenders_pulse.11 = {
	type = country_event
	placement = ROOT
	title = french_pretenders_pulse.11.t
	desc = french_pretenders_pulse.11.d
	flavor = french_pretenders_pulse.11.f

	duration = 3

	dlc = dlc004

	event_image = {
		video = "europenorthamerica_rich_and_poor"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	cooldown = { days = short_modifier_time }

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	trigger = {
		NOT = {
			has_variable = fra_divided_monarchists_freeze
		}
		any_scope_character = {
			has_ideology = ideology:ideology_orleanist
		}

		# TODO PRCAL-38034 - change to look at trade volume with world market
		#any_trade_route = {
		#	is_trade_route_active = yes
		#}
	}

	immediate = {
		random_scope_character = {
			limit = {
				has_ideology = ideology:ideology_orleanist
			}
			save_scope_as = orleanist_character
		}
	}

	option = {
		name = french_pretenders_pulse.11.a
		trigger = {
			ruler_is_orleanist = yes
		}
		ruler = {
			add_modifier = {
				name = modifier_popular_french_monarch
				days = normal_modifier_time
			}
		}
		custom_tooltip = {
			text = orleanist_progress_increase_15_tt
			je:je_divided_monarchists = {
				add_progress = { value = 15 name = divided_monarchists_orleanist_progress_bar }
			}
		}
	}

	option = {
		name = french_pretenders_pulse.11.b
		default_option = yes
		ig:ig_industrialists = {
			add_modifier = {
				name = modifier_orleanist_industrialist_modifier
				days = normal_modifier_time
			}
		}
		custom_tooltip = {
			text = orleanist_progress_increase_10_tt
			je:je_divided_monarchists = {
				add_progress = { value = 10 name = divided_monarchists_orleanist_progress_bar }
			}
		}
	}

	option = {
		name = french_pretenders_pulse.11.c
		custom_tooltip = {
			text = orleanist_progress_increase_25_tt
			je:je_divided_monarchists = {
				add_progress = { value = 25 name = divided_monarchists_orleanist_progress_bar }
			}
		}
	}
}

# Legitimists draw support from relations with the Catholic Church.
french_pretenders_pulse.12 = {
	type = country_event
	placement = ROOT
	title = french_pretenders_pulse.12.t
	desc = french_pretenders_pulse.12.d
	flavor = french_pretenders_pulse.12.f

	duration = 3

	dlc = dlc004

	event_image = {
		video = "southamerica_christianity"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	cooldown = { days = short_modifier_time }

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	trigger = {
		NOT = {
			has_variable = fra_divided_monarchists_freeze
		}
		any_scope_character = {
			has_ideology = ideology:ideology_legitimist
		}
		ig:ig_devout = {
			ig_clout >= 0.15
		}
	}

	immediate = {
		random_scope_character = {
			limit = {
				has_ideology = ideology:ideology_legitimist
			}
			save_scope_as = legitimist_character
		}
		ig:ig_devout = {
			save_scope_as = devout_ig
		}
	}

	option = {
		name = french_pretenders_pulse.12.a
		trigger = {
			ruler_is_legitimist = yes
		}
		ruler = {
			add_modifier = {
				name = modifier_popular_french_monarch
				days = normal_modifier_time
			}
		}
		custom_tooltip = {
			text = legitimist_progress_increase_10_tt
			je:je_divided_monarchists = {
				add_progress = { value = 10 name = divided_monarchists_legitimist_progress_bar }
			}
		}
	}

	option = {
		name = french_pretenders_pulse.12.b
		default_option = yes
		ig:ig_devout = {
			add_modifier = {
				name = modifier_legitimist_devout_modifier
				days = normal_modifier_time
			}
		}
		custom_tooltip = {
			text = legitimist_progress_increase_5_tt
			je:je_divided_monarchists = {
				add_progress = { value = 5 name = divided_monarchists_legitimist_progress_bar }
			}
		}
	}

	option = {
		name = french_pretenders_pulse.12.c
		custom_tooltip = {
			text = legitimist_progress_increase_15_tt
			je:je_divided_monarchists = {
				add_progress = { value = 15 name = divided_monarchists_legitimist_progress_bar }
			}
		}
	}
}

# Partisan IG leader endorses their preferred candidate
french_pretenders_pulse.13 = {
	type = country_event
	placement = ROOT
	title = french_pretenders_pulse.13.t
	desc = french_pretenders_pulse.13.d
	flavor = french_pretenders_pulse.13.f

	duration = 3

	dlc = dlc004

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	gui_window = event_window_1char_tabloid

	left_icon = scope:partisan_character

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	cooldown = { days = normal_modifier_time }

	trigger = {
		NOT = {
			has_variable = fra_divided_monarchists_freeze
		}
		any_interest_group = {
			AND = {
				is_marginal = no
				leader = {
					OR = {
						has_ideology = ideology:ideology_bonapartist
						has_ideology = ideology:ideology_orleanist
						has_ideology = ideology:ideology_legitimist
					}
				}
			}
		}
	}

	immediate = {
		random_interest_group = {
			limit = {
				AND = {
					is_marginal = no
					leader = {
						OR = {
							has_ideology = ideology:ideology_bonapartist
							has_ideology = ideology:ideology_orleanist
							has_ideology = ideology:ideology_legitimist
						}
					}
				}
			}
			save_scope_as = relevant_interest_group
			leader = {
				if = { # this is to ensure a character won't die during the event but an already immortal character doesn't lose immortality at the end of the event
					limit = {
						is_immortal = no # checks if the character isn't already immortal
					}
					set_character_immortal = yes # makes character immortal only until the end of this event
					set_variable = temp_immortality_pretenders_13
				}
				save_scope_as = partisan_character
			}
		}
		capital = {
			save_scope_as = capital_scope
		}
	}

	cancellation_trigger = {
		OR = {
			NOT = {
				exists = scope:partisan_character
			}
			scope:partisan_character = {
				is_character_alive = no
			}
			NOT = {
				exists = scope:relevant_interest_group
			}
		}
	}

	option = {
		name = french_pretenders_pulse.13.a
		default_option = yes
		if = {
			limit = {
				scope:partisan_character = {
					has_ideology = ideology:ideology_bonapartist
				}
			}
			custom_tooltip = {
				text = bonapartist_progress_increase_10_tt
				je:je_divided_monarchists = {
				add_progress = { value = 10 name = divided_monarchists_bonapartist_progress_bar }
			}
			}
		}
		if = {
			limit = {
				scope:partisan_character = {
					has_ideology = ideology:ideology_orleanist
				}
			}
			custom_tooltip = {
				text = orleanist_progress_increase_10_tt
				je:je_divided_monarchists = {
				add_progress = { value = 10 name = divided_monarchists_orleanist_progress_bar }
			}
			}
		}
		if = {
			limit = {
				scope:partisan_character = {
					has_ideology = ideology:ideology_legitimist
				}
			}
			custom_tooltip = {
				text = legitimist_progress_increase_10_tt
				je:je_divided_monarchists = {
				add_progress = { value = 10 name = divided_monarchists_legitimist_progress_bar }
			}
			}
		}
		scope:partisan_character = {
			add_modifier = {
				name = modifier_reasonable_monarchist_partisan
				days = normal_modifier_time
			}
		}
		if = {
			limit = {
				any_scope_character = {
					has_variable = temp_immortality_pretenders_13
				}
			}
			scope:partisan_character = {
				hidden_effect = {
					set_character_immortal = no # sets character back to not immortal
					remove_variable = temp_immortality_pretenders_13
				}
			}
		}
	}

	option = {
		name = french_pretenders_pulse.13.b
		if = {
			limit = {
				scope:partisan_character = {
					has_ideology = ideology:ideology_bonapartist
				}
			}
			custom_tooltip = {
				text = bonapartist_progress_increase_25_tt
				je:je_divided_monarchists = {
					add_progress = { value = 25 name = divided_monarchists_bonapartist_progress_bar }
				}
			}
			custom_tooltip = {
				text = bonapartist_progress_decrease_tick_1_tt
				change_variable = { name = bonapartist_progress_from_effects add = -1 }
			}
		}
		if = {
			limit = {
				scope:partisan_character = {
					has_ideology = ideology:ideology_orleanist
				}
			}
			custom_tooltip = {
				text = orleanist_progress_increase_25_tt
				je:je_divided_monarchists = {
					add_progress = { value = 25 name = divided_monarchists_orleanist_progress_bar }
				}
			}
			custom_tooltip = {
				text = orleanist_progress_decrease_tick_1_tt
				change_variable = { name = orleanist_progress_from_effects add = -1 }
			}
		}
		if = {
			limit = {
				scope:partisan_character = {
					has_ideology = ideology:ideology_legitimist
				}
			}
			custom_tooltip = {
				text = legitimist_progress_increase_25_tt
				je:je_divided_monarchists = {
					add_progress = { value = 25 name = divided_monarchists_legitimist_progress_bar }
				}
			}
			custom_tooltip = {
				text = legitimist_progress_decrease_tick_1_tt
				change_variable = { name = legitimist_progress_from_effects add = -1 }
			}
		}
		if = {
			limit = {
				any_scope_character = {
					has_variable = temp_immortality_pretenders_13
				}
			}
			scope:partisan_character = {
				hidden_effect = {
					set_character_immortal = no # sets character back to not immortal
					remove_variable = temp_immortality_pretenders_13
				}
			}
		}
	}
}

# Partisan general endorses their preferred candidate
french_pretenders_pulse.14 = {
	type = country_event
	placement = ROOT
	title = french_pretenders_pulse.14.t
	desc = french_pretenders_pulse.14.d
	flavor = french_pretenders_pulse.14.f

	duration = 3

	dlc = dlc004

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	gui_window = event_window_1char_tabloid

	left_icon = scope:partisan_character

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	cooldown = { days = normal_modifier_time }

	cancellation_trigger = {
		OR = {
			NOT = {
				exists = scope:partisan_character
			}
			scope:partisan_character = {
				is_character_alive = no
			}
		}
	}

	trigger = {
		NOT = {
			has_variable = fra_divided_monarchists_freeze
		}
		any_scope_character = {
			OR = {
				has_role = admiral
				has_role = general
			}
			OR = {
				has_ideology = ideology:ideology_bonapartist
				has_ideology = ideology:ideology_orleanist
				has_ideology = ideology:ideology_legitimist
			}
		}
	}

	immediate = {
		random_scope_character = {
			limit = {
				OR = {
					has_role = admiral
					has_role = general
				}
				OR = {
					has_ideology = ideology:ideology_bonapartist
					has_ideology = ideology:ideology_orleanist
					has_ideology = ideology:ideology_legitimist
				}
			}
			save_scope_as = partisan_character
		}
	}

	option = {
		name = french_pretenders_pulse.14.a
		default_option = yes
		if = {
			limit = {
				scope:partisan_character = {
					has_ideology = ideology:ideology_bonapartist
				}
			}
			custom_tooltip = {
				text = bonapartist_progress_increase_15_tt
				je:je_divided_monarchists = {
					add_progress = { value = 15 name = divided_monarchists_bonapartist_progress_bar }
				}
			}
		}
		if = {
			limit = {
				scope:partisan_character = {
					has_ideology = ideology:ideology_orleanist
				}
			}
			custom_tooltip = {
				text = orleanist_progress_increase_15_tt
				je:je_divided_monarchists = {
					add_progress = { value = 15 name = divided_monarchists_orleanist_progress_bar }
				}
			}
		}
		if = {
			limit = {
				scope:partisan_character = {
					has_ideology = ideology:ideology_legitimist
				}
			}
			custom_tooltip = {
				text = legitimist_progress_increase_15_tt
				je:je_divided_monarchists = {
					add_progress = { value = 15 name = divided_monarchists_legitimist_progress_bar }
				}
			}
		}
	}

	option = {
		name = french_pretenders_pulse.14.b
		if = {
			limit = {
				scope:partisan_character = {
					has_ideology = ideology:ideology_bonapartist
				}
			}
			custom_tooltip = {
				text = bonapartist_progress_increase_tick_05_tt
				change_variable = { name = bonapartist_progress_from_effects add = 0.5 }
			}
		}
		if = {
			limit = {
				scope:partisan_character = {
					has_ideology = ideology:ideology_orleanist
				}
			}
			custom_tooltip = {
				text = orleanist_progress_increase_tick_05_tt
				change_variable = { name = orleanist_progress_from_effects add = 0.5 }
			}
		}
		if = {
			limit = {
				scope:partisan_character = {
					has_ideology = ideology:ideology_legitimist
				}
			}
			custom_tooltip = {
				text = legitimist_progress_increase_tick_05_tt
				change_variable = { name = legitimist_progress_from_effects add = 0.5 }
			}
		}
	}

	option = {
		name = french_pretenders_pulse.14.c
		trigger = {
			OR = {
				AND = {
					scope:partisan_character = {
						has_ideology = ideology:ideology_bonapartist
					}
					ruler_is_bonapartist = no
				}
				AND = {
					scope:partisan_character = {
						has_ideology = ideology:ideology_orleanist
					}
					ruler_is_orleanist = no
				}
				AND = {
					scope:partisan_character = {
						has_ideology = ideology:ideology_legitimist
					}
					ruler_is_legitimist = no
				}
			}
		}
		#Fire him!
		if = {
			limit = {
				scope:partisan_character = {
					has_ideology = ideology:ideology_bonapartist
				}
			}
			custom_tooltip = {
				text = bonapartist_progress_decrease_10_tt
				je:je_divided_monarchists = {
					add_progress = { value = -10 name = divided_monarchists_bonapartist_progress_bar }
				}
			}
		}
		if = {
			limit = {
				scope:partisan_character = {
					has_ideology = ideology:ideology_orleanist
				}
			}
			custom_tooltip = {
				text = orleanist_progress_decrease_10_tt
				je:je_divided_monarchists = {
					add_progress = { value = -10 name = divided_monarchists_orleanist_progress_bar }
				}
			}
		}
		if = {
			limit = {
				scope:partisan_character = {
					has_ideology = ideology:ideology_legitimist
				}
			}
			custom_tooltip = {
				text = legitimist_progress_decrease_10_tt
				je:je_divided_monarchists = {
					add_progress = { value = -10 name = divided_monarchists_legitimist_progress_bar }
				}
			}
		}
		add_radicals = {
			value = medium_radicals
			interest_group = scope:partisan_character.interest_group
		}
		scope:partisan_character = {
			if = {
				limit = {
					has_role = general
				}
				remove_character_role = general
			}
			if = {
				limit = {
					has_role = admiral
				}
				remove_character_role = admiral
			}
		}
	}
}

# Partisan agitator endorses their preferred candidate
french_pretenders_pulse.15 = {
	type = country_event
	placement = ROOT
	title = french_pretenders_pulse.15.t
	desc = french_pretenders_pulse.15.d
	flavor = french_pretenders_pulse.15.f

	duration = 3

	dlc = dlc004

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"
	gui_window = event_window_1char_tabloid

	left_icon = scope:partisan_character

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	cooldown = { days = short_modifier_time }

	trigger = {
		NOT = {
			has_variable = fra_divided_monarchists_freeze
		}
		any_scope_character = {
			has_role = agitator
			OR = {
				has_ideology = ideology:ideology_bonapartist
				has_ideology = ideology:ideology_orleanist
				has_ideology = ideology:ideology_legitimist
			}
		}
	}

	immediate = {
		random_scope_character = {
			limit = {
				has_role = agitator
				OR = {
					has_ideology = ideology:ideology_bonapartist
					has_ideology = ideology:ideology_orleanist
					has_ideology = ideology:ideology_legitimist
				}
			}
			save_scope_as = partisan_character
		}
		capital = {
			save_scope_as = capital_scope
		}
	}

	option = {
		name = french_pretenders_pulse.15.a
		default_option = yes
		if = {
			limit = {
				scope:partisan_character = {
					has_ideology = ideology:ideology_bonapartist
				}
			}
			custom_tooltip = {
				text = bonapartist_progress_increase_15_tt
				je:je_divided_monarchists = {
					add_progress = { value = 15 name = divided_monarchists_bonapartist_progress_bar }
				}
			}
		}
		if = {
			limit = {
				scope:partisan_character = {
					has_ideology = ideology:ideology_orleanist
				}
			}
			custom_tooltip = {
				text = orleanist_progress_increase_15_tt
				je:je_divided_monarchists = {
					add_progress = { value = 15 name = divided_monarchists_orleanist_progress_bar }
				}
			}
		}
		if = {
			limit = {
				scope:partisan_character = {
					has_ideology = ideology:ideology_legitimist
				}
			}
			custom_tooltip = {
				text = legitimist_progress_increase_15_tt
				je:je_divided_monarchists = {
					add_progress = { value = 15 name = divided_monarchists_legitimist_progress_bar }
				}
			}
		}
	}

	option = {
		name = french_pretenders_pulse.15.b
		scope:partisan_character = {
			add_modifier = {
				name = modifier_monarchist_partisan_popularity
				days = short_modifier_time
			}
		}
		if = {
			limit = {
				scope:partisan_character = {
					has_ideology = ideology:ideology_bonapartist
				}
				any_scope_character = {
					NOT = {
						scope:partisan_character = this
					}
					has_ideology = ideology:ideology_bonapartist
				}
			}
			random_scope_character = {
				limit = {
					NOT = {
						scope:partisan_character = this
					}
					has_ideology = ideology:ideology_bonapartist
				}
				add_modifier = {
					name = modifier_monarchist_partisan_popularity
					days = short_modifier_time
				}
			}
		}
		if = {
			limit = {
				scope:partisan_character = {
					has_ideology = ideology:ideology_orleanist
				}
				any_scope_character = {
					NOT = {
						scope:partisan_character = this
					}
					has_ideology = ideology:ideology_orleanist
				}
			}
			random_scope_character = {
				limit = {
					NOT = {
						scope:partisan_character = this
						has_ideology = ideology:ideology_orleanist
					}
				}
				add_modifier = {
					name = modifier_monarchist_partisan_popularity
					days = short_modifier_time
				}
			}
		}
		if = {
			limit = {
				scope:partisan_character = {
					has_ideology = ideology:ideology_legitimist
				}
				any_scope_character = {
					NOT = {
						scope:partisan_character = this
					}
					has_ideology = ideology:ideology_legitimist
				}
			}
			random_scope_character = {
				limit = {
					NOT = {
						scope:partisan_character = this
						has_ideology = ideology:ideology_legitimist
					}
				}
				add_modifier = {
					name = modifier_monarchist_partisan_popularity
					days = short_modifier_time
				}
			}
		}
	}
}

# Opposition drags down leading party
french_pretenders_pulse.16 = {
	type = country_event
	placement = ROOT
	title = french_pretenders_pulse.16.t
	desc = french_pretenders_pulse.16.d
	flavor = french_pretenders_pulse.16.f

	duration = 3

	dlc = dlc004

	event_image = {
		video = "unspecific_politicians_arguing"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	cooldown = { days = short_modifier_time }

	trigger = {
		NOT = {
			has_variable = fra_divided_monarchists_freeze
		}
		OR = {
			AND = {
				je:je_divided_monarchists = {
					"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" > "scripted_bar_progress(divided_monarchists_legitimist_progress_bar)"
					"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" > "scripted_bar_progress(divided_monarchists_orleanist_progress_bar)"
				}
				any_interest_group = {
					is_in_government = yes
					leader = {
						OR = {
							has_ideology = ideology:ideology_legitimist
							has_ideology = ideology:ideology_orleanist
						}
					}
				}
			}
			AND = {
				je:je_divided_monarchists = {
					"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" > "scripted_bar_progress(divided_monarchists_legitimist_progress_bar)"
					"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" > "scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)"
				}
				any_interest_group = {
					is_in_government = yes
					leader = {
						OR = {
							has_ideology = ideology:ideology_legitimist
							has_ideology = ideology:ideology_bonapartist
						}
					}
				}
			}
			AND = {
				je:je_divided_monarchists = {
					"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" > "scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)"
					"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" > "scripted_bar_progress(divided_monarchists_orleanist_progress_bar)"
				}
				any_interest_group = {
					is_in_government = yes
					leader = {
						OR = {
							has_ideology = ideology:ideology_orleanist
							has_ideology = ideology:ideology_bonapartist
						}
					}
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				je:je_divided_monarchists = {
					"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" > "scripted_bar_progress(divided_monarchists_legitimist_progress_bar)"
					"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" > "scripted_bar_progress(divided_monarchists_orleanist_progress_bar)"
				}
				any_interest_group = {
					is_in_government = yes
					leader = {
						OR = {
							has_ideology = ideology:ideology_legitimist
							has_ideology = ideology:ideology_orleanist
						}
					}
				}
			}
			random_scope_character = {
				limit = {
					has_ideology = ideology:ideology_bonapartist
				}
				save_scope_as = monarchist_leader
			}
			random_interest_group = {
				limit = {
					is_in_government = yes
					leader = {
						OR = {
							has_ideology = ideology:ideology_legitimist
							has_ideology = ideology:ideology_orleanist
						}
					}
				}
				save_scope_as = monarchist_opposition
			}
		}
		else_if = {
			limit = {
				je:je_divided_monarchists = {
					"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" > "scripted_bar_progress(divided_monarchists_legitimist_progress_bar)"
					"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" > "scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)"
				}
				any_interest_group = {
					is_in_government = yes
					leader = {
						OR = {
							has_ideology = ideology:ideology_legitimist
							has_ideology = ideology:ideology_bonapartist
						}
					}
				}
			}
			random_scope_character = {
				limit = {
					has_ideology = ideology:ideology_orleanist
				}
				save_scope_as = monarchist_leader
			}
			random_interest_group = {
				limit = {
					is_in_government = yes
					leader = {
						OR = {
							has_ideology = ideology:ideology_legitimist
							has_ideology = ideology:ideology_bonapartist
						}
					}
				}
				save_scope_as = monarchist_opposition
			}
		}
		else_if = {
			limit = {
				je:je_divided_monarchists = {
					"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" > "scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)"
					"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" > "scripted_bar_progress(divided_monarchists_orleanist_progress_bar)"
				}
				any_interest_group = {
					is_in_government = yes
					leader = {
						OR = {
							has_ideology = ideology:ideology_orleanist
							has_ideology = ideology:ideology_bonapartist
						}
					}
				}
			}
			random_scope_character = {
				limit = {
					has_ideology = ideology:ideology_legitimist
				}
				save_scope_as = monarchist_leader
			}
			random_interest_group = {
				limit = {
					is_in_government = yes
					leader = {
						OR = {
							has_ideology = ideology:ideology_orleanist
							has_ideology = ideology:ideology_bonapartist
						}
					}
				}
				save_scope_as = monarchist_opposition
			}
		}
	}

	option = {
		name = french_pretenders_pulse.16.a
		default_option = yes
		if = {
			limit = {
				je:je_divided_monarchists = {
					"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" > "scripted_bar_progress(divided_monarchists_legitimist_progress_bar)"
					"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" > "scripted_bar_progress(divided_monarchists_orleanist_progress_bar)"
				}
			}
			custom_tooltip = {
				text = bonapartist_progress_decrease_15_tt
				je:je_divided_monarchists = {
					add_progress = { value = -15 name = divided_monarchists_bonapartist_progress_bar }
				}
			}
		}
		else_if = {
			limit = {
				je:je_divided_monarchists = {
					"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" > "scripted_bar_progress(divided_monarchists_legitimist_progress_bar)"
					"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" > "scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)"
				}
			}
			custom_tooltip = {
				text = orleanist_progress_decrease_15_tt
				je:je_divided_monarchists = {
					add_progress = { value = -15 name = divided_monarchists_orleanist_progress_bar }
				}
			}
		}
		else_if = {
			limit = {
				je:je_divided_monarchists = {
					"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" > "scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)"
					"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" > "scripted_bar_progress(divided_monarchists_orleanist_progress_bar)"
				}
			}
			custom_tooltip = {
				text = legitimist_progress_decrease_15_tt
				je:je_divided_monarchists = {
					add_progress = { value = -15 name = divided_monarchists_legitimist_progress_bar }
				}
			}
		}
	}

	option = {
		name = french_pretenders_pulse.16.b
		if = {
			limit = {
				je:je_divided_monarchists = {
					"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" > "scripted_bar_progress(divided_monarchists_legitimist_progress_bar)"
					"scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)" > "scripted_bar_progress(divided_monarchists_orleanist_progress_bar)"
				}
			}
			custom_tooltip = {
				text = bonapartist_progress_decrease_25_tt
				je:je_divided_monarchists = {
					add_progress = { value = -25 name = divided_monarchists_bonapartist_progress_bar }
				}
			}
		}
		else_if = {
			limit = {
				je:je_divided_monarchists = {
					"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" > "scripted_bar_progress(divided_monarchists_legitimist_progress_bar)"
					"scripted_bar_progress(divided_monarchists_orleanist_progress_bar)" > "scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)"
				}
			}
			custom_tooltip = {
				text = orleanist_progress_decrease_25_tt
				je:je_divided_monarchists = {
					add_progress = { value = -25 name = divided_monarchists_orleanist_progress_bar }
				}
			}
		}
		else_if = {
			limit = {
				je:je_divided_monarchists = {
					"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" > "scripted_bar_progress(divided_monarchists_bonapartist_progress_bar)"
					"scripted_bar_progress(divided_monarchists_legitimist_progress_bar)" > "scripted_bar_progress(divided_monarchists_orleanist_progress_bar)"
				}
			}
			custom_tooltip = {
				text = legitimist_progress_decrease_25_tt
				je:je_divided_monarchists = {
					add_progress = { value = -25 name = divided_monarchists_legitimist_progress_bar }
				}
			}
		}
		scope:monarchist_opposition = {
			leader = {
				add_modifier = {
					name = modifier_political_smears_monarchism
					days = short_modifier_time
				}
			}
		}
	}
}

# High radical count harms ruling house
french_pretenders_pulse.17 = {
	type = country_event
	placement = ROOT
	title = french_pretenders_pulse.17.t

	desc = {
		first_valid = {
			triggered_desc = {
				desc = french_pretenders_pulse.17.d
				trigger = {
					NOT = {
						has_journal_entry = je_springtime_of_the_peoples
					}
				}
			}
			triggered_desc = {
				desc = french_pretenders_pulse.17.d1
				trigger = {
					has_journal_entry = je_springtime_of_the_peoples
				}
			}
		}
	}

	flavor = french_pretenders_pulse.17.f

	duration = 3

	dlc = dlc004

	event_image = {
		video = "unspecific_politicians_arguing"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	cooldown = { days = short_modifier_time }

	trigger = {
		NOT = {
			has_variable = fra_divided_monarchists_freeze
		}
		OR = {
			radical_fraction = {
				value >= 0.10
			}
			has_journal_entry = je_springtime_of_the_peoples
		}
	}

	immediate = {
		ruler = {
			save_scope_as = monarch_scope
		}
	}

	option = {
		name = french_pretenders_pulse.17.a
		default_option = yes
		trigger = {
			NOT = {
				has_journal_entry = je_springtime_of_the_peoples
			}
		}
		if = {
			limit = {
				ruler_is_bonapartist = yes
			}
			custom_tooltip = {
				text = bonapartist_progress_decrease_15_tt
				je:je_divided_monarchists = {
					add_progress = { value = -15 name = divided_monarchists_bonapartist_progress_bar }
				}
			}
		}
		else_if = {
			limit = {
				ruler_is_orleanist = yes
			}
			custom_tooltip = {
				text = orleanist_progress_decrease_15_tt
				je:je_divided_monarchists = {
					add_progress = { value = -15 name = divided_monarchists_orleanist_progress_bar }
				}
			}
		}
		else_if = {
			limit = {
				ruler_is_legitimist = yes
			}
			custom_tooltip = {
				text = legitimist_progress_decrease_15_tt
				je:je_divided_monarchists = {
					add_progress = { value = -15 name = divided_monarchists_legitimist_progress_bar }
				}
			}
		}
	}

	option = {
		name = french_pretenders_pulse.17.b
		trigger = {
			NOT = {
				has_journal_entry = je_springtime_of_the_peoples
			}
		}
		add_radicals = {
			value = small_radicals
			strata = lower
		}
		if = {
			limit = {
				ruler_is_bonapartist = yes
			}
			custom_tooltip = {
				text = bonapartist_progress_decrease_5_tt
				je:je_divided_monarchists = {
					add_progress = { value = -5 name = divided_monarchists_bonapartist_progress_bar }
				}
			}
		}
		else_if = {
			limit = {
				ruler_is_orleanist = yes
			}
			custom_tooltip = {
				text = orleanist_progress_decrease_5_tt
				je:je_divided_monarchists = {
					add_progress = { value = -5 name = divided_monarchists_orleanist_progress_bar }
				}
			}
		}
		else_if = {
			limit = {
				ruler_is_legitimist = yes
			}
			custom_tooltip = {
				text = legitimist_progress_decrease_5_tt
				je:je_divided_monarchists = {
					add_progress = { value = -5 name = divided_monarchists_legitimist_progress_bar }
				}
			}
		}
	}

	option = {
		name = french_pretenders_pulse.17.a1
		default_option = yes
		trigger = {
			has_journal_entry = je_springtime_of_the_peoples
		}
		if = {
			limit = {
				ruler_is_bonapartist = yes
			}
			custom_tooltip = {
				text = bonapartist_progress_decrease_25_tt
				je:je_divided_monarchists = {
					add_progress = { value = -25 name = divided_monarchists_bonapartist_progress_bar }
				}
			}
		}
		else_if = {
			limit = {
				ruler_is_orleanist = yes
			}
			custom_tooltip = {
				text = orleanist_progress_decrease_25_tt
				je:je_divided_monarchists = {
					add_progress = { value = -25 name = divided_monarchists_orleanist_progress_bar }
				}
			}
		}
		else_if = {
			limit = {
				ruler_is_legitimist = yes
			}
			custom_tooltip = {
				text = legitimist_progress_decrease_25_tt
				je:je_divided_monarchists = {
					add_progress = { value = -25 name = divided_monarchists_legitimist_progress_bar }
				}
			}
		}
	}

	option = {
		name = french_pretenders_pulse.17.b1
		trigger = {
			has_journal_entry = je_springtime_of_the_peoples
		}
		add_radicals = {
			value = medium_radicals
			strata = lower
		}
		add_radicals = {
			value = small_radicals
			strata = middle
		}
		if = {
			limit = {
				ruler_is_bonapartist = yes
			}
			custom_tooltip = {
				text = bonapartist_progress_decrease_15_tt
				je:je_divided_monarchists = {
					add_progress = { value = -15 name = divided_monarchists_bonapartist_progress_bar }
				}
			}
		}
		else_if = {
			limit = {
				ruler_is_orleanist = yes
			}
			custom_tooltip = {
				text = orleanist_progress_decrease_15_tt
				je:je_divided_monarchists = {
					add_progress = { value = -15 name = divided_monarchists_orleanist_progress_bar }
				}
			}
		}
		else_if = {
			limit = {
				ruler_is_legitimist = yes
			}
			custom_tooltip = {
				text = legitimist_progress_decrease_15_tt
				je:je_divided_monarchists = {
					add_progress = { value = -15 name = divided_monarchists_legitimist_progress_bar }
				}
			}
		}
	}
}

# Death of Charles X
french_pretenders_pulse.18 = {
	type = country_event
	placement = ROOT

	title = french_pretenders_pulse.18.t
	desc = french_pretenders_pulse.18.d
	flavor = french_pretenders_pulse.18.f

	duration = 3

	dlc = dlc004

	event_image = {
		video = "southamerica_christianity"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	trigger = {
		game_date >= 1836.7.1
		NOT = {
			has_global_variable = charles_x_body_done
		}
	}

	immediate = {
		random_state = {
			limit = {
				state_region = s:STATE_SLOVENIA
			}
			owner = {
				save_scope_as = slovenia_owner_scope
			}
		}
	}

	option = {
		name = french_pretenders_pulse.18.a
		default_option = yes
		set_global_variable = charles_x_body_done
		add_loyalists = {
			value = small_radicals
			strata = middle
		}
	}

	option = {
		trigger = {
			NOT = {
				has_variable = fra_divided_monarchists_freeze
			}
		}
		name = french_pretenders_pulse.18.b
		set_global_variable = charles_x_body_done
		capital = {
			add_radicals_in_state = {
				value = large_radicals
			}
		}
		custom_tooltip = {
			text = legitimist_progress_increase_40_tt
			je:je_divided_monarchists = {
				add_progress = { value = 40 name = divided_monarchists_legitimist_progress_bar }
			}
		}
	}
}

# Le Retour des Cendres
french_pretenders_pulse.19 = {
	type = country_event
	placement = ROOT

	title = french_pretenders_pulse.19.t
	desc = french_pretenders_pulse.19.d
	flavor = french_pretenders_pulse.19.f

	duration = 3

	dlc = dlc004

	event_image = {
		video = "votp_gunboat_diplomacy"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/bicorne_hat.dds"

	cooldown = { days = long_modifier_time }

	trigger = {
		#Triggered by Decision
	}

	immediate = {
		capital = {
			save_scope_as = capital_scope
		}
		random_state = {
			limit = {
				state_region = s:STATE_SOUTH_ATLANTIC_ISLANDS
			}
			owner = {
				save_scope_as = saint_helena_owner_scope
			}
		}
	}

	option = {
		name = french_pretenders_pulse.19.a
		default_option = yes
		add_modifier = {
			name = modifier_return_of_napoleons_body
			days = short_modifier_time
		}
		custom_tooltip = {
			text = bonapartist_progress_increase_15_tt
			je:je_divided_monarchists = {
				add_progress = { value = 15 name = divided_monarchists_bonapartist_progress_bar }
			}
		}
	}

	option = {
		name = french_pretenders_pulse.19.b
		every_interest_group = {
			limit = {
				leader = {
					has_ideology = ideology:ideology_bonapartist
				}
			}
			add_modifier = {
				name = modifier_return_of_napoleons_body_ig
				days = short_modifier_time
			}
		}
		custom_tooltip = {
			text = bonapartist_progress_increase_40_tt
			je:je_divided_monarchists = {
				add_progress = { value = 40 name = divided_monarchists_bonapartist_progress_bar }
			}
		}
	}
}
